(self["webpackChunkliubingao_ui"]=self["webpackChunkliubingao_ui"]||[]).push([[2602],{21904:function(e,n,t){"use strict";t.r(n);var a=t(67294),l=t(96089),c=t(65659),r=a.memo((e=>{e.demos;return a.createElement(a.Fragment,null,a.createElement("div",{className:"markdown"},a.createElement("h1",{id:"\u5c0f\u7a0b\u5e8f\u7b14\u8bb0"},a.createElement(l.AnchorLink,{to:"#\u5c0f\u7a0b\u5e8f\u7b14\u8bb0","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u5c0f\u7a0b\u5e8f\u7b14\u8bb0"),a.createElement("h2",{id:"\u57fa\u7840\u8bfe\u7a0b\u90e8\u5206"},a.createElement(l.AnchorLink,{to:"#\u57fa\u7840\u8bfe\u7a0b\u90e8\u5206","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u57fa\u7840\u8bfe\u7a0b\u90e8\u5206"),a.createElement("h4",{id:"\u5fae\u4fe1\u516c\u4f17\u5e73\u53f0"},a.createElement(l.AnchorLink,{to:"#\u5fae\u4fe1\u516c\u4f17\u5e73\u53f0","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u5fae\u4fe1\u516c\u4f17\u5e73\u53f0"),a.createElement("p",null,a.createElement(l.Link,{to:"https://mp.weixin.qq.com/"},"https://mp.weixin.qq.com/")),a.createElement("p",null,"\u6ce8\u518c\u65f6\u53ef\u9009\u62e9\u7c7b\u578b\uff1a\u8ba2\u9605\u53f7\u3001\u670d\u52a1\u53f7\u3001\u5c0f\u7a0b\u5e8f\u3001\u4f01\u4e1a\u5fae\u4fe1"),a.createElement("p",null,a.createElement("strong",null,"\u6bcf\u4e2a\u90ae\u7bb1\u4ec5\u80fd\u6ce8\u518c\u4e00\u4e2a\u5c0f\u7a0b\u5e8f\u3002")),a.createElement("p",null,"\u4e2a\u4eba\u7c7b\u578b\u5c0f\u7a0b\u5e8f\uff1a\u65e0\u6cd5\u4f7f\u7528\u5fae\u4fe1\u652f\u4ed8\u3001\u65e0\u6cd5\u4f7f\u7528\u5361\u5305\u529f\u80fd"),a.createElement("h5",{id:"\u5c0f\u7a0b\u5e8f\u6587\u6863api"},a.createElement(l.AnchorLink,{to:"#\u5c0f\u7a0b\u5e8f\u6587\u6863api","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u5c0f\u7a0b\u5e8f\u6587\u6863API"),a.createElement("p",null,a.createElement(l.Link,{to:"https://developers.weixin.qq.com/miniprogram/dev/framework/quickstart/"},"\u5c0f\u7a0b\u5e8f\u5f00\u53d1\u6587\u6863")),a.createElement("h5",{id:"\u5fae\u4fe1\u5f00\u653e\u793e\u533a"},a.createElement(l.AnchorLink,{to:"#\u5fae\u4fe1\u5f00\u653e\u793e\u533a","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u5fae\u4fe1\u5f00\u653e\u793e\u533a"),a.createElement("p",null,a.createElement(l.Link,{to:"https://developers.weixin.qq.com/community/develop/question"},"\u5fae\u4fe1\u5f00\u53d1\u793e\u533a")),a.createElement("h4",{id:"\u76ee\u5f55\u8bf4\u660e"},a.createElement(l.AnchorLink,{to:"#\u76ee\u5f55\u8bf4\u660e","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u76ee\u5f55\u8bf4\u660e"),a.createElement("p",null,a.createElement("strong",null,"\u9ed8\u8ba4\u76ee\u5f55")),a.createElement("p",null,"pages-----------------------\u9875\u9762\u76f8\u5173"),a.createElement("p",null,"\u200b index  ----------------- \u9996\u9875\u6587\u4ef6\u5939"),a.createElement("p",null,"\u200b  index.js ------------\u9996\u9875js"),a.createElement("p",null,"\u200b  index.json---------\u9996\u9875\u914d\u7f6e"),a.createElement("p",null,"\u200b  index.wxml-------\u9996\u9875html"),a.createElement("p",null,"\u200b  index.wxss--------\u9996\u9875css"),a.createElement("p",null,"utils------------------------\u5de5\u5177\u76f8\u5173"),a.createElement("p",null,"app.js ----------------------\u9879\u76ee\u603bjs"),a.createElement("p",null,"app.json-------------------\u5168\u5c40\u914d\u7f6e( \u9875\u9762\u8def\u7531\u4ee5\u53ca\u5934\u90e8\u3001\u5e95\u90e8\u5bfc\u822a\u7684\u914d\u7f6e\u7b49)"),a.createElement("p",null,"app.wxss -----------------\u9879\u76ee\u603b\u6837\u5f0fcss"),a.createElement("p",null,"project.config.json ----\u9879\u76ee\u914d\u7f6e"),a.createElement("p",null,a.createElement("strong",null,"\u4ee3\u7801\u6784\u6210")),a.createElement("p",null,".json \uff1a\u914d\u7f6e\u6587\u4ef6\uff0c\u4ee5json\u683c\u5f0f\u5b58\u50a8\u914d\u7f6e"),a.createElement("p",null,"\u200b    \u9879\u76ee\u4e2d\u6709\u4e09\u79cd\u914d\u7f6e\uff1a\u9879\u76ee\u914d\u7f6e\uff08project.config.json\uff09\u3001\u5168\u5c40\u914d\u7f6e\uff08app.json\uff09\u3001\u9875\u9762\u914d\u7f6e\uff08index.json\uff09"),a.createElement("p",null,".wxml: \u76f8\u5f53\u4e8ehtml\u6587\u4ef6"),a.createElement("p",null,".wxss: \u76f8\u5f53\u4e8ecss"),a.createElement("p",null,".js : \u5c31\u662fjs"),a.createElement("h4",{id:"\u6587\u4ef6\u8bf4\u660e"},a.createElement(l.AnchorLink,{to:"#\u6587\u4ef6\u8bf4\u660e","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u6587\u4ef6\u8bf4\u660e"),a.createElement("p",null,a.createElement("strong",null,"project.config.json\u9879\u76ee\u914d\u7f6e \u90e8\u5206\u4ee3\u7801\u8bf4\u660e")),a.createElement("p",null,"setting\uff1a","{"),a.createElement("p",null,"urlCheck \u662f\u5426\u68c0\u6d4b\u5b89\u5168\u7684\u57df\u540d"),a.createElement("p",null,"es6  \u662f\u5426\u628aes6\u8f6ces5"),a.createElement("p",null,"postcss \u662f\u5426\u628acss\u6837\u5f0f\u81ea\u52a8\u8865\u5168"),a.createElement("p",null,"minified \u662f\u5426\u538b\u7f29"),a.createElement("p",null,"}"),a.createElement("p",null,a.createElement("strong",null,"app.json \u5168\u5c40\u914d\u7f6e")),a.createElement("p",null,a.createElement(l.Link,{to:"https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html"},"\u5168\u5c40\u914d\u7f6eAPI")),a.createElement("p",null,a.createElement("strong",null,"wxml \u76f8\u5173\u4ecb\u7ecd")),a.createElement("p",null,a.createElement(l.Link,{to:"https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxml/"},"wxmlAPI")),a.createElement(c.Z,{code:'<view>{{motto}}</view>\n\n\u5faa\u73af\u6e32\u67d3\n<view wx:for="{{list}}" wx:key="{{index}}">\n      {{index}} {{item}}\n</view>\n\n\u6539\u53d8for\u5faa\u73afitem\u548cindex\u7684\u540d\u79f0\n<block wx:for="{{list}}" wx:for-item="data" wx:for-index="inx">\n\t{{inx}} {{data}}\n</block>\n\n\u6761\u4ef6\u6e32\u67d3 (\u7c7b\u4f3cvue\u7684v-if\u3001v-else)\n<view wx:if="{{isLogin}}">\u5df2\u767b\u5f55</view>\n<view wx:else>\u8bf7\u767b\u5f55</view>\n\n\u6761\u4ef6\u663e\u793a\uff08\u7c7b\u4f3cvue\u7684v-show\uff09\n<view hidden="{{isLogin}}">\u663e\u793a\u5185\u5bb9</view>\n\n\u7ed1\u5b9a\u70b9\u51fb\u4e8b\u4ef6\n<button bindtap=\u201ctapName\u201d>\u6309\u94ae</button>\n\nPage({\n  tapName: function(event) {\n    console.log(event)\n  }\n})\n...',lang:"html"}),a.createElement("p",null,a.createElement("strong",null,"wxss \u76f8\u5173\u4ecb\u7ecd")),a.createElement("p",null,a.createElement(l.Link,{to:"https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxss.html"},"wxssAPI")),a.createElement("p",null,"\u5c3a\u5bf8\u5355\u4f4d\uff1arpx\uff0c\u6839\u636e\u5c4f\u5e55\u5bbd\u5ea6\u81ea\u9002\u5e94\u3002"),a.createElement("p",null,"\u5f15\u5165\u5916\u90e8wxss\uff1a@import \u2019...\u2018"),a.createElement("p",null,a.createElement("strong",null,"js\u76f8\u5173\u4ecb\u7ecd")),a.createElement("p",null,"WXS\uff08WeiXin Script\uff09\u662f\u5c0f\u7a0b\u5e8f\u7684\u4e00\u5957\u811a\u672c\u8bed\u8a00"),a.createElement("p",null,a.createElement(l.Link,{to:"https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxs/"},"wxsAPI")),a.createElement("p",null,"\u7ed1\u5b9a\u70b9\u51fb\u4e8b\u4ef6"),a.createElement(c.Z,{code:"<button bindtap=\u201conTapHandler\u201d>\u70b9\u6211+1</button>\n<view>{{count}}</view>",lang:"html"}),a.createElement(c.Z,{code:"Page({\n  data: {\n    count: 0\n  },\n  onTapHandler: function() {\n  \tthis.setData({\n  \t\tcount: this.data.count++\n  \t})\n  }\n})",lang:"js"}),a.createElement("h5",{id:"\u963b\u6b62\u4e8b\u4ef6\u5192\u6ce1"},a.createElement(l.AnchorLink,{to:"#\u963b\u6b62\u4e8b\u4ef6\u5192\u6ce1","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u963b\u6b62\u4e8b\u4ef6\u5192\u6ce1"),a.createElement("p",null,"\u628a\u7ed1\u5b9a\u65b9\u5f0f bindtap \u6362\u6210 catchtap \u5373\u53ef\u3002"),a.createElement("h4",{id:"\u7b2c\u4e09\u65b9\u5e93"},a.createElement(l.AnchorLink,{to:"#\u7b2c\u4e09\u65b9\u5e93","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u7b2c\u4e09\u65b9\u5e93"),a.createElement("p",null,a.createElement("strong",null,"WeUI")),a.createElement("p",null,"weUI\u662f\u4e00\u5957\u540c\u5fae\u4fe1\u539f\u751f\u89c6\u89c9\u4f53\u9a8c\u4e00\u81f4\u7684\u57fa\u7840\u6837\u5f0f\u5e93"),a.createElement("p",null,a.createElement("strong",null,"iView Weapp")),a.createElement("p",null,"\u4e00\u5957\u9ad8\u8d28\u91cf\u7684\u5fae\u4fe1\u5c0f\u7a0b\u5e8fUI\u7ec4\u4ef6\u5e93"),a.createElement("p",null,a.createElement("strong",null,"Vant Weapp")),a.createElement("p",null,"\u8f7b\u91cf\u3001\u53ef\u9760\u7684\u5c0f\u7a0b\u5e8fUI\u7ec4\u4ef6\u5e93"),a.createElement("h4",{id:"\u4e91\u5f00\u53d1"},a.createElement(l.AnchorLink,{to:"#\u4e91\u5f00\u53d1","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u4e91\u5f00\u53d1"),a.createElement("p",null,a.createElement("strong",null,"\u5c0f\u7a0b\u5e8f\u4f20\u7edf\u5f00\u53d1\u6a21\u5f0f")),a.createElement("p",null,"\u5ba2\u6237\u7aef  -----\x3e \u670d\u52a1\u7aef\uff08\u540e\u7aef\u4ee3\u7801\u3001\u6570\u636e\u5e93\uff09------\x3e \u8fd0\u7ef4\uff08DB\u7ef4\u62a4\u3001\u6587\u4ef6\u5b58\u50a8\u3001\u5185\u5bb9\u52a0\u901f\u3001\u7f51\u7edc\u9632\u62a4\u3001\u5bb9\u5668\u670d\u52a1\u3001\u8d1f\u8f7d\u5747\u8861\u3001\u5b89\u5168\u52a0\u56fa\u7b49...\uff09"),a.createElement("p",null,a.createElement("strong",null,"\u5c0f\u7a0b\u5e8f\u4e91\u5f00\u53d1\u6a21\u5f0f")),a.createElement("p",null,"\u5ba2\u6237\u7aef -----\x3e \u4e91\u5f00\u53d1\uff08\u4e91\u51fd\u6570\u3001\u4e91\u6570\u636e\u5e93\u3001\u4e91\u5b58\u50a8\uff09"),a.createElement("p",null,a.createElement("strong",null,"\u4f20\u7edf\u5f00\u53d1 VS \u4e91\u5f00\u53d1")),a.createElement("p",null,"\u5f00\u53d1\u6548\u7387\u4f4e         Serverless\uff08\u65e0\u670d\u52a1\uff09"),a.createElement("p",null,"\u8fd0\u7ef4\u6210\u672c\u9ad8         \u5f00\u53d1\u8005\u66f4\u5173\u6ce8\u4e1a\u52a1\u903b\u8f91"),a.createElement("p",null,a.createElement("strong",null,"\u65e0\u670d\u52a1\uff08Serverless\uff09\u5f00\u53d1\u662f\u672a\u6765\u7684\u53d1\u5c55\u8d8b\u52bf")),a.createElement("h5",{id:"\u4e91\u5f00\u53d1\u4e09\u5927\u57fa\u7840\u80fd\u529b"},a.createElement(l.AnchorLink,{to:"#\u4e91\u5f00\u53d1\u4e09\u5927\u57fa\u7840\u80fd\u529b","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),a.createElement("strong",null,"\u4e91\u5f00\u53d1\u4e09\u5927\u57fa\u7840\u80fd\u529b")),a.createElement("h5",{id:"\u4e91\u51fd\u6570"},a.createElement(l.AnchorLink,{to:"#\u4e91\u51fd\u6570","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u4e91\u51fd\u6570"),a.createElement("p",null,"\uff08\u76f8\u5f53\u4e8e\u4f20\u7edf\u5f00\u53d1\u4e2d\u7684\u540e\u53f0\u63a5\u53e3\uff09"),a.createElement("p",null,"\u83b7\u53d6appid\u3001\u83b7\u53d6openid\u3001\u751f\u6210\u5206\u4eab\u56fe\u3001\u8c03\u7528\u817e\u8baf\u4e91SDK ..."),a.createElement("h5",{id:"\u4e91\u6570\u636e\u5e93"},a.createElement(l.AnchorLink,{to:"#\u4e91\u6570\u636e\u5e93","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u4e91\u6570\u636e\u5e93"),a.createElement("p",null,"\u6570\u636e\u7684\u589e\u3001\u5220\u3001\u6539\u3001\u67e5 ..."),a.createElement("h5",{id:"\u4e91\u5b58\u50a8"},a.createElement(l.AnchorLink,{to:"#\u4e91\u5b58\u50a8","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u4e91\u5b58\u50a8"),a.createElement("p",null,"\u7ba1\u7406\u6587\u4ef6\u3001\u4e0a\u4f20\u6587\u4ef6\u3001\u4e0b\u8f7d\u6587\u4ef6\u3001\u5206\u4eab\u6587\u4ef6 ..."),a.createElement("p",null,a.createElement("strong",null,"\u6bcf\u4e2a\u5c0f\u7a0b\u5e8f\u8d26\u53f7\u53ef\u514d\u8d39\u521b\u5efa\u4e24\u4e2a\u73af\u5883\uff0c\u5efa\u8bae\uff1a\u5f00\u53d1\u73af\u5883\u3001\u751f\u6210\u73af\u5883")),a.createElement("h4",{id:"\u4e91\u6570\u636e\u5e93\u80fd\u529b"},a.createElement(l.AnchorLink,{to:"#\u4e91\u6570\u636e\u5e93\u80fd\u529b","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u4e91\u6570\u636e\u5e93\u80fd\u529b"),a.createElement("p",null,"\u4e91\u5f00\u53d1\u63d0\u4f9b\u4e86\u4e00\u4e2ajson\u6570\u636e\u5e93\uff0c\u63d0\u4f9b2GB\u514d\u8d39\u5b58\u50a8\u7a7a\u95f4\u3002"),a.createElement("h4",{id:"\u6570\u636e\u7c7b\u578b"},a.createElement(l.AnchorLink,{to:"#\u6570\u636e\u7c7b\u578b","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u6570\u636e\u7c7b\u578b"),a.createElement("p",null,"String \u5b57\u7b26\u4e32"),a.createElement("p",null,"Number \u6570\u5b57"),a.createElement("p",null,"Object \u5bf9\u8c61"),a.createElement("p",null,"Array \u6570\u7ec4"),a.createElement("p",null,"Boolean \u5e03\u5c14\u503c"),a.createElement("p",null,"GeoPoint \u5730\u7406\u4f4d\u7f6e\u70b9"),a.createElement("p",null,"Date \u65f6\u95f4 \uff08\u7cbe\u786e\u5230\u6beb\u79d2ms\uff0c\u5ba2\u6237\u7aef\u65f6\u95f4\uff09"),a.createElement("p",null,"Null \u7a7a"),a.createElement("h4",{id:"\u64cd\u4f5c\u4e91\u6570\u636e\u5e93"},a.createElement(l.AnchorLink,{to:"#\u64cd\u4f5c\u4e91\u6570\u636e\u5e93","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u64cd\u4f5c\u4e91\u6570\u636e\u5e93"),a.createElement("p",null,"\u5c0f\u7a0b\u5e8f\u63a7\u5236\uff08\u8bfb\u5199\u6570\u636e\u5e93\u53d7\u6743\u9650\u9650\u5236\uff09"),a.createElement("p",null,"\u4e91\u51fd\u6570\u63a7\u5236\uff08\u62e5\u6709\u6240\u6709\u8bfb\u5199\u6570\u636e\u5e93\u7684\u6743\u9650\uff09"),a.createElement("p",null,"\u63a7\u5236\u53f0\u63a7\u5236\uff08\u62e5\u6709\u6240\u6709\u8bfb\u5199\u6570\u636e\u5e93\u7684\u6743\u9650\uff09"),a.createElement("h4",{id:"\u4e91\u6570\u636e\u5e93\u6743\u9650\u7ba1\u7406"},a.createElement(l.AnchorLink,{to:"#\u4e91\u6570\u636e\u5e93\u6743\u9650\u7ba1\u7406","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u4e91\u6570\u636e\u5e93\u6743\u9650\u7ba1\u7406"),a.createElement("p",null,"\u4ec5\u521b\u5efa\u8005\u53ef\u5199\uff0c\u6240\u6709\u4eba\u53ef\u8bfb \uff08\u9002\u5408\u4e8e\u6587\u7ae0\uff09"),a.createElement("p",null,"\u4ec5\u521b\u5efa\u8005\u53ef\u8bfb\u5199 (\u9002\u7528\u4e8e\u79c1\u5bc6\u5185\u5bb9)"),a.createElement("p",null,"\u4ec5\u7ba1\u7406\u7aef\u53ef\u5199\uff0c\u6240\u6709\u4eba\u53ef\u8bfb\uff08\u9002\u7528\u4e8e\u5546\u54c1\u4fe1\u606f\uff09"),a.createElement("p",null,"\u4ec5\u7ba1\u7406\u7aef\u53ef\u8bfb\u5199\uff08\u9002\u7528\u4e8e\u540e\u53f0\u654f\u611f\u6570\u636e\uff09"),a.createElement("h4",{id:"\u64cd\u4f5c\u4e91\u6570\u636e\u5e93-1"},a.createElement(l.AnchorLink,{to:"#\u64cd\u4f5c\u4e91\u6570\u636e\u5e93-1","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u64cd\u4f5c\u4e91\u6570\u636e\u5e93"),a.createElement(c.Z,{code:"//\u521d\u59cb\u5316\u6570\u636e\u5e93\nconst db = wx.cloud.database() // \u5c0f\u7a0b\u5e8f\u7aef\u521d\u59cb\u5316\u6570\u636e\u5e93\uff0c\u5982\u679c\u5728\u4e91\u51fd\u6570\u7aef\u4e0d\u9700\u8981\u52a0wx\n\n//\u5207\u6362\u73af\u5883(\u5f00\u53d1\u73af\u5883/\u751f\u4ea7\u73af\u5883)\nconst testDB = wx.cloud.database({\n\tenv: 'test'\n})",lang:"js"}),a.createElement("h2",{id:"\u5b9e\u6218\u8bfe\u7a0b\u90e8\u5206"},a.createElement(l.AnchorLink,{to:"#\u5b9e\u6218\u8bfe\u7a0b\u90e8\u5206","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u5b9e\u6218\u8bfe\u7a0b\u90e8\u5206"),a.createElement("h4",{id:"serverless\u65e0\u670d\u52a1"},a.createElement(l.AnchorLink,{to:"#serverless\u65e0\u670d\u52a1","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"serverless\uff08\u65e0\u670d\u52a1\uff09"),a.createElement("p",null,"\u6982\u5ff5\uff1a\u51fd\u6570\u5373\u670d\u52a1\uff0c\u5f53\u9700\u8981\u540e\u7aef\u670d\u52a1\u7684\u65f6\u5019\uff0c\u4e0d\u9700\u8981\u5173\u5fc3\u540e\u7aef\u7684IP\u5730\u5740\u3001\u57df\u540d\uff0c\u53ea\u9700\u8981\u50cf\u8c03\u7528\u666e\u901a\u51fd\u6570\u4e00\u6837\u65e2\u53ef\u4ee5\u5b9e\u73b0\u8c03\u7528\u3002"),a.createElement("h4",{id:"\u4e91\u5f00\u53d1\u4f18\u52bf"},a.createElement(l.AnchorLink,{to:"#\u4e91\u5f00\u53d1\u4f18\u52bf","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u4e91\u5f00\u53d1\u4f18\u52bf"),a.createElement("p",null,"\u5feb\u901f\u4e0a\u7ebf\u3001\u4e13\u6ce8\u6838\u5fc3\u4e1a\u52a1\u3001\u72ec\u7acb\u5f00\u53d1\u4e00\u4e2a\u5b8c\u6574\u7684\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u3001\u4e0d\u9700\u8981\u5b66\u4e60\u65b0\u7684\u8bed\u8a00\uff0c\u53ea\u9700\u8981\u4f1ajavascript\u3001\u65e0\u9700\u8fd0\u7ef4\uff0c \u8282\u7ea6\u6210\u672c\u3001\u6570\u636e\u5b89\u5168\u3001"),a.createElement("h4",{id:"\u4e91\u5f00\u53d1\u63d0\u4f9b\u80fd\u529b"},a.createElement(l.AnchorLink,{to:"#\u4e91\u5f00\u53d1\u63d0\u4f9b\u80fd\u529b","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u4e91\u5f00\u53d1\u63d0\u4f9b\u80fd\u529b"),a.createElement("p",null,"\u4e91\u51fd\u6570\uff1a\u5728\u4e91\u7aef\u8fd0\u884c\u7684\u4ee3\u7801\uff0c\u5fae\u4fe1\u79c1\u6709\u534f\u8bae\u5929\u7136\u9274\u6743 \uff08\u7406\u89e3\uff1a\u76f8\u5f53\u4e8e\u540e\u7aef\u90e8\u5206\uff09"),a.createElement("p",null,"\u4e91\u6570\u636e\u5e93\uff1a\u4e00\u4e2a\u65e2\u53ef\u4ee5\u5728\u5c0f\u7a0b\u5e8f\u7aef\u64cd\u4f5c\u53c8\u53ef\u4ee5\u5728\u4e91\u51fd\u6570\u4e2d\u64cd\u4f5c\u7684JSON\u6570\u636e\u5e93"),a.createElement("p",null,"\u4e91\u5b58\u50a8\uff1a\u5728\u4e91\u7aef\u5b58\u50a8\u6587\u4ef6\uff0c\u53ef\u4ee5\u5728\u4e91\u7aef\u63a7\u5236\u53f0\u53ef\u89c6\u5316\u7ba1\u7406"),a.createElement("p",null,"\u4e91\u8c03\u7528\uff1a\u57fa\u4e8e\u4e91\u51fd\u6570\u514d\u9274\u6743\u4f7f\u7528\u5c0f\u7a0b\u5e8f\u5f00\u653e\u63a5\u53e3\u7684\u80fd\u529b\uff08\u6bd4\u5982\u8bf4\u7ed9\u7528\u6237\u63a8\u9001\u6d88\u606f\u7b49\uff09"),a.createElement("p",null,"HTTP API\uff1a\u4f7f\u7528HTTP API\u5f00\u53d1\u8005\u53ef\u5728\u5df2\u6709\u670d\u52a1\u5668\u4e0a\u8bbf\u95ee\u4e91\u8d44\u6e90\uff0c\u5b9e\u73b0\u4e0e\u4e91\u5f00\u53d1\u7684\u4e92\u901a\uff08\u4f5c\u7528\uff1a\u5bf9\u539f\u6709\u4f20\u7edf\u6a21\u5f0f\u4e0b\u5f00\u53d1\u7684\u5c0f\u7a0b\u5e8f\uff0c\u53ef\u4ee5\u4e0e\u4e91\u5f00\u53d1\u8fdb\u884c\u4e92\u901a\uff09"),a.createElement("h4",{id:"appid"},a.createElement(l.AnchorLink,{to:"#appid","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"appID"),a.createElement("p",null,"\u6bcf\u4e2a\u5c0f\u7a0b\u5e8f\u552f\u4e00\u7684id"),a.createElement("h4",{id:"\u4e91\u5f00\u53d1\u9879\u76ee\u9ed8\u8ba4\u76ee\u5f55\u7ed3\u6784"},a.createElement(l.AnchorLink,{to:"#\u4e91\u5f00\u53d1\u9879\u76ee\u9ed8\u8ba4\u76ee\u5f55\u7ed3\u6784","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u4e91\u5f00\u53d1\u9879\u76ee\u9ed8\u8ba4\u76ee\u5f55\u7ed3\u6784"),a.createElement("p",null,"cloudfunctions ----------------------------\u4e91\u51fd\u6570"),a.createElement("p",null,"\u200b callback ---------------------------------- \u56de\u8c03\u51fd\u6570"),a.createElement("p",null,"\u200b  config.json ---------------------------"),a.createElement("p",null,"\u200b  index.js --------------------------------"),a.createElement("p",null,"\u200b  package.json ------------------------"),a.createElement("p",null,"\u200b echo ----------------------------------------"),a.createElement("p",null,"\u200b login ----------------------------------------"),a.createElement("p",null,"\u200b openapi -----------------------------------"),a.createElement("p",null,"miniprogram ------------------------------- \u5c0f\u7a0b\u5e8f"),a.createElement("p",null,"\u200b images ------------------------------------- \u56fe\u7247"),a.createElement("p",null,"\u200b pages --------------------------------------- \u9875\u9762"),a.createElement("p",null,"\u200b style ----------------------------------------- \u6837\u5f0f"),a.createElement("p",null,"\u200b app.js --------------------------------------- \u9879\u76eejs"),a.createElement("p",null,"\u200b app.json ----------------------------------- \u5168\u5c40\u914d\u7f6e"),a.createElement("p",null,"\u200b app.wxss ---------------------------------- \u9879\u76ee\u6837\u5f0f"),a.createElement("p",null,"\u200b sitemap.json -----------------------------  \uff08\u5c0f\u7a0b\u5e8fSEO\u76f8\u5173\uff09"),a.createElement("p",null,"project.config.json ----------------------- \u9879\u76ee\u914d\u7f6e"),a.createElement("h4",{id:"\u4e91\u5f00\u53d1\u73af\u5883"},a.createElement(l.AnchorLink,{to:"#\u4e91\u5f00\u53d1\u73af\u5883","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u4e91\u5f00\u53d1\u73af\u5883"),a.createElement("p",null,"\u4e91\u5f00\u53d1\u53ef\u521b\u5efa\u4e24\u4e2a\u73af\u5883\uff0c\u5efa\u8bae\u4e00\u4e2a\u4e3a\u5f00\u53d1\u73af\u5883\uff0c\u4e00\u4e2a\u4e3a\u751f\u4ea7\u73af\u5883"),a.createElement("h4",{id:"\u5f00\u53d1\u524d\u7684\u51c6\u5907"},a.createElement(l.AnchorLink,{to:"#\u5f00\u53d1\u524d\u7684\u51c6\u5907","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u5f00\u53d1\u524d\u7684\u51c6\u5907"),a.createElement("p",null,"\u5f00\u53d1\u5de5\u5177 > \u53f3\u4e0a\u89d2\u8be6\u60c5 > \u672c\u5730\u8bbe\u7f6e > \u8c03\u8bd5\u57fa\u7840\u5e93  \u8bbe\u7f6e\u4e3a\u6700\u65b0\u7248\u672c"),a.createElement("p",null,"app.js > wx.cloud.init > env \u8bbe\u7f6e\u73af\u5883ID"),a.createElement("h4",{id:"projectconfigjson-\u6587\u4ef6\u8bf4\u660e"},a.createElement(l.AnchorLink,{to:"#projectconfigjson-\u6587\u4ef6\u8bf4\u660e","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"project.config.json \u6587\u4ef6\u8bf4\u660e"),a.createElement("p",null,"miniprogramRoot \u5c0f\u7a0b\u5e8f\u524d\u7aef\u4ee3\u7801\u76ee\u5f55"),a.createElement("p",null,"cloudfunctionRoot \u4e91\u51fd\u6570\u4ee3\u7801\u76ee\u5f55"),a.createElement("h4",{id:"appjson"},a.createElement(l.AnchorLink,{to:"#appjson","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"app.json"),a.createElement("p",null,"pages  \u8bbe\u7f6e\u9875\u9762 \uff0c\u8bbe\u7f6e\u540e\u4f1a\u81ea\u52a8\u5728pages\u76ee\u5f55\u4e0b\u751f\u6210\u76f8\u5e94\u7684\u76ee\u5f55\u548c\u6587\u4ef6"),a.createElement("p",null,"\u8bbe\u7f6e\u5e95\u90e8\u5bfc\u822a\u6309\u94ae\uff1a"),a.createElement(c.Z,{code:'"tabBar": {\n    "color": "#474747", // \u6587\u5b57\u989c\u8272\n    "selectedColor": "#d43c43", // \u6587\u5b57\u9009\u4e2d\u989c\u8272\n    "list": [{ // \u6309\u94ae\u5217\u8868\uff0c2-5\u9879\n      "pagePath": "pages/playlist/playlist", // \u6309\u94ae\u5bf9\u5e94\u9875\u9762\n      "text": "\u97f3\u4e50", // \u6587\u5b57\n      "iconPath": "images/music.png", // \u56fe\u6807\u8def\u5f84\n      "selectedIconPath": "images/music-actived.png" // \u9009\u4e2d\u56fe\u6807\u7684\u8def\u5f84\n    },\n    {\n      "pagePath": "pages/blog/blog",\n      "text": "\u53d1\u73b0",\n      "iconPath": "images/blog.png",\n      "selectedIconPath": "images/blog-actived.png"\n    },\n    {\n      "pagePath": "pages/profile/profile",\n      "text": "\u6211\u7684",\n      "iconPath": "images/profile.png",\n      "selectedIconPath": "images/profile-actived.png"\n    }]\n  }',lang:"json"}),a.createElement("blockquote",null,a.createElement("p",null,"\u56fe\u6807\u6765\u81ea\u4e8e ",a.createElement(l.Link,{to:"https://www.iconfont.cn/"},"https://www.iconfont.cn")),a.createElement("p",null,"\u963f\u91cc\u5df4\u5df4\u56fe\u6807\u5e93\uff0c\u5305\u542b\u77e2\u91cf\u56fe\u6807\u3001\u5b57\u4f53\u56fe\u6807\u3001\u5b57\u4f53\u7b49")),a.createElement("h4",{id:"\u4ee3\u7801\u89c4\u8303"},a.createElement(l.AnchorLink,{to:"#\u4ee3\u7801\u89c4\u8303","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u4ee3\u7801\u89c4\u8303"),a.createElement("p",null,"\u5f88\u591a\u516c\u53f8\u501f\u9274\u7684\u4ee3\u7801\u89c4\u8303\uff1a",a.createElement(l.Link,{to:"https://github.com/airbnb/javascript"},"https://github.com/airbnb/javascript")),a.createElement("h4",{id:"\u97f3\u4e50\u9875\u9762\u5f00\u53d1"},a.createElement(l.AnchorLink,{to:"#\u97f3\u4e50\u9875\u9762\u5f00\u53d1","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u300a\u97f3\u4e50\u300b\u9875\u9762\u5f00\u53d1"),a.createElement(c.Z,{code:'\x3c!-- \u8f6e\u64ad\u56fe\u7ec4\u4ef6 \u53c2\u6570\uff1aindicator-dots \u5c0f\u5706\u70b9\uff0cautoplay \u81ea\u52a8\u64ad\u653e, interval \u95f4\u9694\u65f6\u95f4\uff0cduration \u52a8\u753b\u65f6\u957f --\x3e\n<swiper indicator-dots="true" circular="true" interval="3000" duration="500">\n  <block wx:for="{{swiperImgUrls}}" wx:key="{{index}}"> \x3c!-- \u7a7a\u8282\u70b9 --\x3e\n    <swiper-item>\n      <image src="{{item.url}}" mode="widthFix" class="img"></image>\n    </swiper-item>\n  </block>\n</swiper>',lang:"html"}),a.createElement("h4",{id:"\u81ea\u5b9a\u4e49\u7ec4\u4ef6"},a.createElement(l.AnchorLink,{to:"#\u81ea\u5b9a\u4e49\u7ec4\u4ef6","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u81ea\u5b9a\u4e49\u7ec4\u4ef6"),a.createElement("p",null,a.createElement("strong",null,"\u521b\u5efa\u7ec4\u4ef6")),a.createElement("p",null,"\u521b\u5efa\u76ee\u5f55 components > \u7ec4\u4ef6\u76ee\u5f55\u540d\u79f0 > \u53f3\u952e ",a.createElement("code",null,"\u65b0\u5efaComponent")),a.createElement("h5",{id:"\u5f15\u5165\u7ec4\u4ef6"},a.createElement(l.AnchorLink,{to:"#\u5f15\u5165\u7ec4\u4ef6","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),a.createElement("strong",null,"\u5f15\u5165\u7ec4\u4ef6")),a.createElement("p",null,"\u5728page\u7684json\u6587\u4ef6\u4e2d\uff1a"),a.createElement(c.Z,{code:'{\n  "usingComponents": {\n    "x-playlist":"/components/playlist/playlist"\n  }\n}',lang:"json"}),a.createElement("p",null,"\u5728page\u7684wxml\u4e2d\uff1a"),a.createElement(c.Z,{code:"<x-playlist> </x-playlist>",lang:"html"}),a.createElement("p",null,a.createElement("strong",null,"\u9875\u9762\u5f15\u5165\u7ec4\u4ef6\u4ee5\u53ca\u7ec4\u4ef6\u5185\u90e8\u5728\u5f15\u7528\u5b50\u7ec4\u4ef6\u7684\u65b9\u6cd5\u662f\u4e00\u6837\u7684\uff0c\u540c\u6837\u9700\u8981\u8bbe\u7f6ejson\u6587\u4ef6\u3002")),a.createElement("h5",{id:"\u7ec4\u4ef6\u4f20\u503c"},a.createElement(l.AnchorLink,{to:"#\u7ec4\u4ef6\u4f20\u503c","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),a.createElement("strong",null,"\u7ec4\u4ef6\u4f20\u503c")),a.createElement("p",null,"\u7236\u7ec4\u4ef6\u4e2d\uff1a\u5728\u5f15\u5165\u7ec4\u4ef6\u7684\u65f6\u5019\u81ea\u5b9a\u4e49\u5c5e\u6027\u540d\u79f0\uff0c\u5e76\u628a\u6570\u636e\u4f20\u5165\u5b50\u7ec4\u4ef6"),a.createElement(c.Z,{code:'\x3c!-- \u53c2\u6570\uff1aplaylist \u81ea\u5b9a\u4e49\u540d\u79f0\uff0c\u4f20\u5165\u7ec4\u4ef6\u7684\u6570\u636e --\x3e\n<x-playlist playlist="{{\u4f20\u5165\u7684\u6570\u636e}}"></x-playlist>',lang:"html"}),a.createElement("p",null,"\u5b50\u7ec4\u4ef6\u4e2d\uff1a \u5b50\u7ec4\u4ef6\u7684js\u6587\u4ef6\uff1a"),a.createElement(c.Z,{code:"/**\n   * \u7ec4\u4ef6\u7684\u5c5e\u6027\u5217\u8868\n   */\n  properties: {\n    playlist:{ // \u63a5\u6536\u7236\u7ec4\u4ef6\u4f20\u8f93\u7684\u6570\u636e\n      type: Object // \u6570\u636e\u7c7b\u578b\n    }\n   },\n\n //\u5b50\u7ec4\u4ef6\u7684wxml\u6587\u4ef6\u53ef\u76f4\u63a5\u5f15\u5165\u6570\u636e{{playlist}}",lang:"js"}),a.createElement("h4",{id:"wxkey-\u7684\u4f7f\u7528"},a.createElement(l.AnchorLink,{to:"#wxkey-\u7684\u4f7f\u7528","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"wx:key \u7684\u4f7f\u7528"),a.createElement("p",null,"key\u7684\u503c\u4e0d\u5efa\u8bae\u4f7f\u7528index\uff0c\u56e0\u4e3a\u5f53\u6570\u636e\u53d1\u751f\u53d8\u5316\u4f1adom\u7ed3\u6784\u4ea7\u751f\u53d8\u5316\u65f6\uff0c\u4f7f\u7528index\u7684\u5730\u65b9\u4e0d\u4f1a\u968f\u4e4b\u53d8\u5316\u3002"),a.createElement("p",null,"\u53ef\u4ee5\u4f7f\u7528\u6570\u636e\u5185\u90e8\u6bcf\u9879\u4e0d\u4e00\u6837\u7684\u4e00\u4e2a\u6570\u503c\uff0c\u5982id"),a.createElement(c.Z,{code:'<block wx:for="{{swiperImgUrls}}" wx:key="url"> \u8fd9\u91ccurl\u4e0d\u9700\u8981\u53cc\u5927\u62ec\u53f7\uff0c\u5982\u4f7f\u7528index\u5219\u9700\u8981{{}}\n    <view>\n      <image src="{{item.url}}" mode="widthFix" class="img"></image>\n    </view>\n</block>\n\n<view class="playlist-container">\n  <block wx:for="{{playlist}}" wx:key="_id">\n    \x3c!-- \u53c2\u6570\uff1aplaylist \u81ea\u5b9a\u4e49\u540d\u79f0\uff0c\u4f20\u5165\u7ec4\u4ef6\u7684\u6570\u636e --\x3e\n    <x-playlist playlist="{{item}}"></x-playlist>\n  </block>\n</view>',lang:"html"}),a.createElement("h4",{id:"asyncawait-\u8bed\u6cd5"},a.createElement(l.AnchorLink,{to:"#asyncawait-\u8bed\u6cd5","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"async/await \u8bed\u6cd5"),a.createElement("p",null,"\u76ee\u524d\uff0c\u5728\u4e91\u51fd\u6570\u91cc\uff0c\u7531\u4e8e Node \u7248\u672c\u6700\u4f4e\u662f 8.9\uff0c\u56e0\u6b64\u662f\u5929\u7136\u652f\u6301 async/await \u8bed\u6cd5\u7684\u3002\u800c\u5728\u5c0f\u7a0b\u5e8f\u7aef\u5219\u4e0d\u7136\u3002\u5728\u5fae\u4fe1\u5f00\u53d1\u8005\u5de5\u5177\u91cc\uff0c\u4ee5\u53ca Android \u7aef\u624b\u673a\uff08\u6d4f\u89c8\u5668\u5185\u6838\u662f QQ\u6d4f\u89c8\u5668\u7684 X5\uff09\uff0casync/await\u662f\u5929\u7136\u652f\u6301\u7684\uff0c\u4f46 iOS \u7aef\u624b\u673a\u5728\u8f83\u4f4e\u7248\u672c\u5219\u4e0d\u652f\u6301\uff0c\u56e0\u6b64\u9700\u8981\u5f15\u5165\u989d\u5916\u7684 \u6587\u4ef6\u3002"),a.createElement("p",null,"\u53ef\u628a\u8fd9\u4e2a ",a.createElement(l.Link,{to:"https://github.com/xiecheng328/miniprogram/blob/master/regenerator/runtime.js"},"runtime.js")," \u6587\u4ef6\u5f15\u7528\u5230\u6709\u4f7f\u7528 async/await \u7684\u6587\u4ef6\u5f53\u4e2d\u3002"),a.createElement(c.Z,{code:"// \u6ce8\u610f\uff0c\u5fc5\u987b\u547d\u540d\u4e3a regeneratorRuntime\nimport regeneratorRuntime from '../../utils/runtime.js'",lang:"js"}),a.createElement("h4",{id:"\u4e91\u51fd\u6570\u7684\u4f7f\u7528"},a.createElement(l.AnchorLink,{to:"#\u4e91\u51fd\u6570\u7684\u4f7f\u7528","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u4e91\u51fd\u6570\u7684\u4f7f\u7528"),a.createElement("p",null,"cloudfunctions\u76ee\u5f55 \u53f3\u952e ",a.createElement("code",null,"\u65b0\u5efa Node.js \u4e91\u51fd\u6570"),"  > \u8f93\u5165\u76ee\u5f55\u540d ",a.createElement("code",null,"getPlaylist")),a.createElement("p",null,"\u5728\u4e91\u51fd\u6570\u4e2d\u5411\u7b2c\u4e09\u65b9\u670d\u52a1\u5668\u53d1\u9001\u8bf7\u6c42\u8981\u4f9d\u8d56\u7b2c\u4e09\u65b9\u5e93"),a.createElement("p",null,a.createElement("strong",null,"\u5b89\u88c5\u4f9d\u8d56\u5305")),a.createElement("p",null,"\u4e91\u51fd\u6570\u76ee\u5f55  ",a.createElement("code",null,"getPlaylist")," \u53f3\u952e ",a.createElement("code",null,"\u5728\u7ec8\u7aef\u6253\u5f00")," \u6253\u5f00\u547d\u4ee4\u884c  \u8f93\u5165\u547d\u4ee4\uff1a"),a.createElement(c.Z,{code:"npm install --save request\nnpm install --save request-promise",lang:"sh"}),a.createElement("p",null,"github request-promise\uff1a",a.createElement(l.Link,{to:"https://github.com/request/request-promise"},"https://github.com/request/request-promise")),a.createElement("p",null,"\u7136\u540e\u5199\u76f8\u5e94\u4ee3\u7801"),a.createElement(c.Z,{code:"// \u4e91\u51fd\u6570\u5165\u53e3\u6587\u4ef6\nconst cloud = require('wx-server-sdk')\n\ncloud.init()\n\nconst rp = require('request-promise') // \u9700\u5b89\u88c5\u4f9d\u8d56\u5305\n\nconst URL = 'http://musicapi.xiecheng.live/personalized'\n\n// \u4e91\u51fd\u6570\u5165\u53e3\u51fd\u6570\nexports.main = async (event, context) => {\n  const playlist = await rp(URL).then((res) => {\n    return JSON.parse(res).result\n  })\n  console.log(playlist)\n}",lang:"js"}),a.createElement("p",null,"\u5199\u5b8c\u4ee3\u7801\uff0c\u4e91\u51fd\u6570\u76ee\u5f55  ",a.createElement("code",null,"getPlaylist")," \u53f3\u952e ",a.createElement("code",null,"\u4e0a\u4f20\u5e76\u90e8\u7f72\uff1a\u4e91\u7aef\u5b89\u88c5\u4f9d\u8d56\uff08\u4e0d\u4e0a\u4f20node_modules\uff09")," \u8fdb\u884c\u4e0a\u4f20\u90e8\u7f72\u4ee3\u7801\u5230\u4e91\u7aef\uff0c\u7b49\u5f85\u4e0a\u4f20\u6210\u529f\uff0c\u6253\u5f00\u4e91\u5f00\u53d1\u63a7\u5236\u53f0\u5373\u53ef\u770b\u5230\u5df2\u7ecf\u4e0a\u4f20\u7684\u4e91\u51fd\u6570\uff0c\u5e76\u53ef\u5bf9\u4e91\u51fd\u6570\u8fdb\u884c\u6d4b\u8bd5\u3002"),a.createElement("h5",{id:"\u6570\u636e\u5e93\u64cd\u4f5c"},a.createElement(l.AnchorLink,{to:"#\u6570\u636e\u5e93\u64cd\u4f5c","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u6570\u636e\u5e93\u64cd\u4f5c"),a.createElement("p",null,"\u6570\u636e\u5e93> \u521b\u5efa\u96c6\u5408 > playlist"),a.createElement(c.Z,{code:"// \u4e91\u51fd\u6570\u5165\u53e3\u6587\u4ef6\nconst cloud = require('wx-server-sdk')\n\ncloud.init()\n\nconst db = cloud.database() // \u521d\u59cb\u5316\u6570\u636e\u5e93,\u5982\u679c\u5728\u5c0f\u7a0b\u5e8f\u7aef\u521d\u59cb\u5316\u6570\u636e\u5e93\u9700\u8981\u5728\u524d\u9762\u52a0wx.\n\nconst rp = require('request-promise') // \u9700\u5b89\u88c5\u4f9d\u8d56\u5305\n\nconst URL = 'http://musicapi.xiecheng.live/personalized' // \u7b2c\u4e09\u65b9\u670d\u52a1\u5668\u5730\u5740\uff08\u8001\u5e08\u4ece\u7f51\u6613\u4e91\u83b7\u53d6\u7684\u6570\u636e\u90e8\u7f72\u5728\u5176\u670d\u52a1\u5668\uff0c\u6bcf\u5929\u7684\u6570\u636e\u4f1a\u66f4\u65b0\uff09\n\nconst playlistCollection = db.collection('playlist') // \u83b7\u53d6\u5230\u6570\u636e\u5e93playlist\u96c6\u5408\n\nconst MAX_LIMIT = 10 // \u5b9a\u4e49\u5e38\u91cf\uff0c\u83b7\u53d6\u6570\u636e\u5e93\u6761\u6570\u6700\u5927\u7684\u9650\u5236\n\n// \u4e91\u51fd\u6570\u5165\u53e3\u51fd\u6570\nexports.main = async (event, context) => {\n  /**\n   * \u6ce8\uff1a\n   * - \u5173\u4e8e\u6570\u636e\u5e93\u7684\u64cd\u4f5c\u90fd\u662f\u5f02\u6b65\u64cd\u4f5c\uff0c\u90fd\u9700\u6dfb\u52a0await\u5173\u952e\u5b57\n   * - console.log \u6253\u5370\u5728\u4e91\u5f00\u53d1\u63a7\u5236\u53f0 \u4e91\u51fd\u6570\u6d4b\u8bd5\u5185\u67e5\u770b\n   * - \u5355\u6b21\u83b7\u53d6\u6570\u636e\u5e93\u6570\u636e\u6709\u6761\u6570\u9650\u5236\uff0c\u4e91\u51fd\u6570\u7aef\u6700\u591a\u83b7\u53d6100\u6761\uff0c\u5c0f\u7a0b\u5e8f\u7aef\u6700\u591a\u83b7\u53d620\u6761\n   */\n\n  // const list = await playlistCollection.get() // \u83b7\u53d6\u6570\u636e\u5e93\u96c6\u5408\u7684\u6570\u636e \uff08\u56e0\u4e3a\u6709\u6761\u6570\u9650\u5236\uff0c\u4e0d\u76f4\u63a5\u7528\u6b64\u65b9\u6cd5\uff09\n\n  // \u7a81\u7834\u6761\u6570\u9650\u5236 \uff08\u4e3a\u4e86\u8bfb\u53d6\u5230\u5168\u90e8\u6570\u636e\u7136\u540e\u4e0e\u7b2c\u4e09\u65b9\u670d\u52a1\u5668\u83b7\u53d6\u7684\u6570\u636e\u8fdb\u884c\u5bf9\u6bd4\u53bb\u91cd\uff09\n  const countResult = await playlistCollection.count() // \u83b7\u53d6\u6570\u636e\u603b\u6761\u6570 \u8fd4\u56de\u4e3a\u5bf9\u8c61\n  const total = countResult.total // \u53d6\u5f97\u603b\u6761\u6570\n  const batchTimes = Math.ceil(total / MAX_LIMIT)\n  const tasks = []\n  for(let i = 0; i < batchTimes; i++) {\n    let promise = playlistCollection.skip(i * MAX_LIMIT).limit(MAX_LIMIT).get() // \u4ece\u7b2c skip \u6761\u5f00\u59cb\u53d6\uff0c\u6700\u591a\u53d6 limit \u6761\u6570\u636e\n    tasks.push(promise)\n  }\n  let list = {\n    data: []\n  }\n  if (tasks.length > 0) {\n    list = (await Promise.all(tasks)).reduce((acc, cur) => { // reduce\u6570\u7ec4\u65b9\u6cd5 \u7d2f\u79ef\u62fc\u63a5\n      return {\n        data: acc.data.concat(cur.data)\n      }\n    })\n  }\n\n  // \u83b7\u53d6\u7b2c\u4e09\u65b9\u670d\u52a1\u5668\u7aef\u6570\u636e\n  const playlist = await rp(URL).then((res) => {\n    return JSON.parse(res).result\n  })\n\n  // \u6570\u636e\u5e93\u4e0e\u670d\u52a1\u5668\u6570\u636e\u5bf9\u6bd4\u53bb\u91cd\uff08\u6570\u636e\u5df2\u5b58\u5728\u6570\u636e\u5e93\u7684\u65e0\u9700\u518d\u91cd\u590d\u6dfb\u52a0\uff09\n  const newData = []\n  for(let i = 0, len1 = playlist.length; i < len1; i++) {\n    let flag = true\n    for(let j = 0, len2 = list.data.length; j < len2; j++) {\n      if(playlist[i].id === list.data[j].id){\n        flag = false\n        break\n      }\n    }\n    if(flag){\n      newData.push(playlist[i])\n    }\n  }\n\n  // \u628a\u6570\u636e\u63d2\u5165\u6570\u636e\u5e93\uff0c\u9700\u8981\u5355\u6761\u63d2\u5165\n  for (let i = 0, len = newData.length; i < len; i++) {\n    await playlistCollection.add({ // \u7ed9\u6570\u636e\u5e93\u96c6\u5408\u6dfb\u52a0\u6570\u636e\n      data: {\n        ...newData[i],\n        createTime: db.serverDate(), // db.serverDate() \u83b7\u53d6\u670d\u52a1\u5668\u65f6\u95f4\n      }\n    }).then((res) => { // \u6570\u636e\u6dfb\u52a0\u6210\u529f\n      console.log('\u6570\u636e\u6dfb\u52a0\u6210\u529f')\n    }).catch((err) => { // \u5931\u8d25\n      console.error(err)\n    })\n  }\n  return newData.length // \u63d2\u5165\u591a\u5c11\u6761\u6570\u636e\n}",lang:"js"}),a.createElement("h5",{id:"\u67e5\u8be2\u6570\u636e\u5e93"},a.createElement(l.AnchorLink,{to:"#\u67e5\u8be2\u6570\u636e\u5e93","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u67e5\u8be2\u6570\u636e\u5e93"),a.createElement(c.Z,{code:"//\u4e91\u51fd\u6570\u4e2d\u67e5\u8be2\u6570\u636e\u5e93\u7684\u4f8b\u5b50\uff1a\n\n// \u4e91\u51fd\u6570\u5165\u53e3\u6587\u4ef6\nconst cloud = require('wx-server-sdk')\n\ncloud.init()\n\nconst TcbRouter = require('tcb-router')\nconst db = cloud.database() // \u521d\u59cb\u5316\u6570\u636e\u5e93\nconst blogCollection = db.collection('blog') // \u535a\u5ba2\u7684\u6570\u636e\u5e93\u96c6\u5408\n\n// \u4e91\u51fd\u6570\u5165\u53e3\u51fd\u6570\nexports.main = async (event, context) => {\n  const app = new TcbRouter({ event }) // \u521d\u59cb\u5316TcbRouter\n\n  app.router('list', async (ctx, next) => {\n    // skip \u4ece\u7b2c\u51e0\u6761\u5f00\u59cb\u67e5\uff0climit \u67e5\u51e0\u6761\u6570\u636e\uff0corderBy(\u6392\u5e8f\u5b57\u6bb5\uff0c\u6392\u5e8f\u65b9\u5f0f) \u6392\u5e8f\uff0c\u6392\u5e8f\u65b9\u5f0fdesc\u964d\u5e8f/asc\u5347\u5e8f\n    ctx.body =  await blogCollection.skip(event.start).limit(event.count)\n    .orderBy('createTime', 'desc').get().then((res) => {\n      return res.data\n    })\n\n  })\n\n\n  return app.serve() // \u5fc5\u9700\u8fd4\u56de\n}",lang:"js"}),a.createElement("h5",{id:"\u4e91\u51fd\u6570\u8c03\u8bd5"},a.createElement(l.AnchorLink,{to:"#\u4e91\u51fd\u6570\u8c03\u8bd5","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u4e91\u51fd\u6570\u8c03\u8bd5"),a.createElement("p",null,"\u4e91\u63a7\u5236\u53f0\u4e2d\u53ef\u4f1a\u4e91\u51fd\u6570\u8fdb\u884c\u4e91\u7aef\u6d4b\u8bd5"),a.createElement("p",null,"\u5728\u5c0f\u7a0b\u5e8f\u8c03\u7528\u4e91\u51fd\u6570\u540e\uff0c\u53ef\u67e5\u770b\u4e91\u51fd\u6570",a.createElement("strong",null,"\u65e5\u5fd7")),a.createElement("h4",{id:"\u5b9a\u65f6\u89e6\u53d1\u4e91\u51fd\u6570"},a.createElement(l.AnchorLink,{to:"#\u5b9a\u65f6\u89e6\u53d1\u4e91\u51fd\u6570","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u5b9a\u65f6\u89e6\u53d1\u4e91\u51fd\u6570"),a.createElement("p",null,"\u5982\u679c\u4e91\u51fd\u6570\u9700\u8981\u5b9a\u65f6 / \u5b9a\u671f\u6267\u884c\uff0c\u4e5f\u5c31\u662f\u5b9a\u65f6\u89e6\u53d1\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4e91\u51fd\u6570\u5b9a\u65f6\u89e6\u53d1\u5668\u3002\u914d\u7f6e\u4e86\u5b9a\u65f6\u89e6\u53d1\u5668\u7684\u4e91\u51fd\u6570\uff0c\u4f1a\u5728\u76f8\u5e94\u65f6\u95f4\u70b9\u88ab\u81ea\u52a8\u89e6\u53d1\uff0c\u51fd\u6570\u7684\u8fd4\u56de\u7ed3\u679c\u4e0d\u4f1a\u8fd4\u56de\u7ed9\u8c03\u7528\u65b9"),a.createElement("p",null,"\u4e91\u51fd\u6570\u76ee\u5f55\u4e0b\u65b0\u5efa config.json"),a.createElement("p",null,a.createElement(l.Link,{to:"https://developers.weixin.qq.com/miniprogram/dev/wxcloud/guide/functions/triggers.html"},"API")),a.createElement(c.Z,{code:'{\n  "triggers": [\n    {\n      "name": "myTriggers",\n      "type": "timer",\n      "config":"0 0 10,14,16,20 * * * *" //\u8868\u793a\u6bcf\u5929\u768410\u70b9\u300114\u70b9\u300116\u70b9\u300120\u70b9\u89e6\u53d1\u4e00\u6b21\n    }\n  ]\n}',lang:"json"}),a.createElement("p",null,"\u7f16\u8f91\u597d\u89e6\u53d1\u5668\u4e4b\u540e\uff0c\u8981\u5728\u4e91\u51fd\u6570\u76ee\u5f55 > \u53f3\u952e > ",a.createElement("code",null,"\u4e0a\u4f20\u89e6\u53d1\u5668")),a.createElement("h4",{id:"\u914d\u7f6e\u4e91\u51fd\u6570\u8d85\u65f6\u65f6\u95f4"},a.createElement(l.AnchorLink,{to:"#\u914d\u7f6e\u4e91\u51fd\u6570\u8d85\u65f6\u65f6\u95f4","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u914d\u7f6e\u4e91\u51fd\u6570\u8d85\u65f6\u65f6\u95f4"),a.createElement("p",null,"\u5f53\u4e91\u51fd\u6570\u6bd4\u8f83\u590d\u6742\u7684\u65f6\u5019\uff0c\u9ed8\u8ba4\u7684\u8d85\u65f6\u65f6\u95f43\u79d2\u53ef\u80fd\u4e0d\u80fd\u591f\u6ee1\u8db3\u9700\u6c42\uff0c\u53ef\u4ee5\u9002\u5f53\u7684\u8bbe\u7f6e\u66f4\u4e3a\u5408\u7406\u7684\u65f6\u95f4"),a.createElement("p",null,"\u4e91\u5f00\u53d1\u63a7\u5236\u53f0 > \u4e91\u51fd\u6570 > \u914d\u7f6e > \u8d85\u65f6\u65f6\u95f4"),a.createElement("h4",{id:"\u4e0a\u62c9\u52a0\u8f7d\u4e0e\u4e0b\u62c9\u5237\u65b0"},a.createElement(l.AnchorLink,{to:"#\u4e0a\u62c9\u52a0\u8f7d\u4e0e\u4e0b\u62c9\u5237\u65b0","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u4e0a\u62c9\u52a0\u8f7d\u4e0e\u4e0b\u62c9\u5237\u65b0"),a.createElement(c.Z,{code:'page\u9875\u9762json\u4e2d\uff1a\n"enablePullDownRefresh": true\n\n\npage\u9875\u9762js\u4e2d\u6709\u8fd9\u4e24\u4e2a\u51fd\u6570\uff1a\n\n /**\n   * \u9875\u9762\u76f8\u5173\u4e8b\u4ef6\u5904\u7406\u51fd\u6570--\u76d1\u542c\u7528\u6237\u4e0b\u62c9\u52a8\u4f5c\n   */\n  onPullDownRefresh: function() {\n\t this.setData({\n      playlist: []\n    })\n    this._getPlaylist()\n  },\n\n  /**\n   * \u9875\u9762\u4e0a\u62c9\u89e6\u5e95\u4e8b\u4ef6\u7684\u5904\u7406\u51fd\u6570\n   */\n  onReachBottom: function() {\n    this._getPlaylist()\n  },\n\n\n\n \u4e0b\u62c9\u5237\u65b0\u8bf7\u6c42\u5b8c\u6570\u636e\u540e\n wx.stopPullDownRefresh() // \u505c\u6b62\u4e0b\u62c9\u5237\u65b0\u52a8\u753b',lang:"js"}),a.createElement("h4",{id:"\u4e91\u51fd\u6570\u8def\u7531\u4f18\u5316tcb-router"},a.createElement(l.AnchorLink,{to:"#\u4e91\u51fd\u6570\u8def\u7531\u4f18\u5316tcb-router","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u4e91\u51fd\u6570\u8def\u7531\u4f18\u5316tcb-router"),a.createElement("p",null,"\u4e00\u4e2a\u7528\u6237\u5728\u4e00\u4e2a\u4e91\u73af\u5883\u53ea\u80fd\u521b\u5efa50\u4e2a\u4e91\u51fd\u6570"),a.createElement("p",null,"\u5047\u5982\u5c0f\u7a0b\u5e8f\u975e\u5e38\u590d\u6742\uff0c50\u4e2a\u4e91\u51fd\u6570\u4e0d\u80fd\u591f\u6ee1\u8db3\u4e1a\u52a1\u9700\u6c42\u600e\u4e48\u529e\uff1f"),a.createElement("p",null,"\u76f8\u4f3c\u7684\u8bf7\u6c42\u5f52\u7c7b\u5230\u540c\u4e00\u4e2a\u4e91\u51fd\u6570\u5904\u7406"),a.createElement("p",null,"tcb-router\u662f\u4e00\u4e2akoa\u98ce\u683c\u7684\u4e91\u51fd\u6570\u8def\u7531\u5e93"),a.createElement("p",null,"\u901a\u4fd7\u7406\u89e3\u5c31\u662f\u53ef\u4ee5\u628a\u5f88\u591a\u4e2a\u63a5\u53e3\u5f52\u7c7b\u5230\u540c\u4e00\u4e2a\u4e91\u51fd\u6570\u5185\u3002"),a.createElement("p",null,"github-tcb-router:  ",a.createElement(l.Link,{to:"https://github.com/TencentCloudBase/tcb-router"},"https://github.com/TencentCloudBase/tcb-router")),a.createElement("p",null,"koa\u6d0b\u8471\u6a21\u578b..."),a.createElement("p",null,"\u5b89\u88c5\uff1a"),a.createElement(c.Z,{code:"\u5728\u4f7f\u7528\u5230tcb-router\u7684\u4e91\u51fd\u6570\u76ee\u5f55\u4e0b\u6253\u5f00\u547d\u4ee4\u884c\uff0c\u8f93\u5165\u547d\u4ee4\u8fdb\u884c\u5b89\u88c5\nnpm install --save tcb-router",lang:"sh"}),a.createElement(c.Z,{code:"// \u4e91\u51fd\u6570\u7684 index.js\nconst TcbRouter = require('router'); // \u5fc5\u9700\n\nexports.main = (event, context) => {\n    const app = new TcbRouter({ event });// \u5fc5\u9700\n\n    // app.use \u8868\u793a\u8be5\u4e2d\u95f4\u4ef6\u4f1a\u9002\u7528\u4e8e\u6240\u6709\u7684\u8def\u7531(\u5168\u5c40\u4e2d\u95f4\u4ef6) \u975e\u5fc5\u9700\n    app.use(async (ctx, next) => { // \u8fd9\u4e2a\u4e2d\u95f4\u4ef6\u8868\u793a\u6240\u6709\u8def\u7531\u90fd\u4f1a\u8c03\u7528\u5230\uff0c\u800c\u8def\u7531\u4e2d\u95f4\u4ef6\u4e3a\u5355\u72ec\u8c03\u7528\n        ctx.data = {}; // \u83b7\u53d6\u8981\u4f20\u7ed9\u5c0f\u7a0b\u5e8f\u7aef\u7684\u6570\u636e\n        ctx.data.openId = event.userInfo.openId // \u8fd9\u91cc\u83b7\u53d6\u5230\u7684openId\u5c06\u5206\u5e03\u5230\u6240\u6709\u8def\u7531\n        await next(); // \u6267\u884c\u4e0b\u4e00\u4e2d\u95f4\u4ef6\n    });\n\n    // \u8def\u7531\u4e3a\u6570\u7ec4\u8868\u793a\uff0c\u8be5\u4e2d\u95f4\u4ef6\u9002\u7528\u4e8e user \u548c timer \u4e24\u4e2a\u8def\u7531\n    app.router(['user', 'timer'], async (ctx, next) => {\n        ctx.data.company = 'Tencent'; // \u8fd9\u91cc\u83b7\u53d6\u5230\u7684\u6570\u636e\u5c06\u5206\u5e03\u5230 user \u548c timer \u4e24\u4e2a\u8def\u7531\n        await next(); // \u6267\u884c\u4e0b\u4e00\u4e2d\u95f4\u4ef6\n    });\n\n    // \u8def\u7531\u4e3a\u5b57\u7b26\u4e32\uff0c\u8be5\u4e2d\u95f4\u4ef6\u53ea\u9002\u7528\u4e8e user \u8def\u7531\n    app.router('user', async (ctx, next) => {\n        ctx.data.name = 'heyli';  // \u83b7\u53d6\u8981\u4f20\u7ed9\u5c0f\u7a0b\u5e8f\u7aef\u7684\u6570\u636e\n        await next(); // \u6267\u884c\u4e0b\u4e00\u4e2d\u95f4\u4ef6\n    }, async (ctx, next) => {\n        ctx.data.sex = 'male'; // \u83b7\u53d6\u8981\u4f20\u7ed9\u5c0f\u7a0b\u5e8f\u7aef\u7684\u6570\u636e\n        await next(); // \u6267\u884c\u4e0b\u4e00\u4e2d\u95f4\u4ef6\n    }, async (ctx) => {\n        ctx.data.city = 'Foshan'; // \u83b7\u53d6\u8981\u4f20\u7ed9\u5c0f\u7a0b\u5e8f\u7aef\u7684\u6570\u636e\n        // ctx.body \u8fd4\u56de\u6570\u636e\u5230\u5c0f\u7a0b\u5e8f\u7aef\n        ctx.body = { code: 0, data: ctx.data};  // \u8981\u4f20\u7ed9\u5c0f\u7a0b\u5e8f\u7aef\u7684\u6570\u636e\n    });\n\n    // \u8def\u7531\u4e3a\u5b57\u7b26\u4e32\uff0c\u8be5\u4e2d\u95f4\u4ef6\u53ea\u9002\u7528\u4e8e timer \u8def\u7531\n    app.router('timer', async (ctx, next) => {\n        ctx.data.name = 'flytam';\n        await next(); // \u6267\u884c\u4e0b\u4e00\u4e2d\u95f4\u4ef6\n    }, async (ctx, next) => {\n        ctx.data.sex = await new Promise(resolve => {\n        // \u7b49\u5f85500ms\uff0c\u518d\u6267\u884c\u4e0b\u4e00\u4e2d\u95f4\u4ef6\n        setTimeout(() => {\n            resolve('male');\n        }, 500);\n        });\n        await next(); // \u6267\u884c\u4e0b\u4e00\u4e2d\u95f4\u4ef6\n    }, async (ctx)=>  {\n        ctx.data.city = 'Taishan';\n\n        // ctx.body \u8fd4\u56de\u6570\u636e\u5230\u5c0f\u7a0b\u5e8f\u7aef\n        ctx.body = { code: 0, data: ctx.data };\n    });\n\n    return app.serve(); // \u5fc5\u9700\n\n}\n\n\n\u5c0f\u7a0b\u5e8f\u7aef\uff1a\n\n// \u8c03\u7528\u540d\u4e3a router \u7684\u4e91\u51fd\u6570\uff0c\u8def\u7531\u540d\u4e3a user\nwx.cloud.callFunction({\n    // \u8981\u8c03\u7528\u7684\u4e91\u51fd\u6570\u540d\u79f0\n    name: \"router\",\n    // \u4f20\u9012\u7ed9\u4e91\u51fd\u6570\u7684\u53c2\u6570\n    data: {\n        $url: \"user\", // \u8981\u8c03\u7528\u7684\u8def\u7531\u7684\u8def\u5f84\uff0c\u4f20\u5165\u51c6\u786e\u8def\u5f84\u6216\u8005\u901a\u914d\u7b26*\n        other: \"xxx\"\n    }\n}).then((res) => {\n\tconsole.log(res)\n})",lang:"js"}),a.createElement("p",null,"\u4e0a\u9762tcb-router\u4ee3\u7801\u4f1a\u6309\u7167\u6d0b\u8471\u6a21\u578b\u6267\u884c\uff0c\u5373\u5148\u4ece\u4e0a\u5f80\u4e0b\u9010\u4e2a\u8fdb\u5165\u4e2d\u95f4\u4ef6\uff0c\u518d\u4ece\u4e0b\u5f80\u4e0a\u9010\u4e2a\u9000\u51fa\u4e2d\u95f4\u4ef6\u3002"),a.createElement("h4",{id:"\u672c\u5730\u5b58\u50a8\u7f13\u5b58"},a.createElement(l.AnchorLink,{to:"#\u672c\u5730\u5b58\u50a8\u7f13\u5b58","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u672c\u5730\u5b58\u50a8\uff08\u7f13\u5b58\uff09"),a.createElement(c.Z,{code:"// \u5b58\u50a8\uff1a\nwx.setStorageSync(key, data) // \u540c\u6b65\u5b58\u50a8\uff08\u5b58\u50a8\u6210\u529f\u518d\u7ee7\u7eed\u4e0b\u4e00\u6b65\u64cd\u4f5c\uff09\nwx.setStorage(key, data) // \u5f02\u6b65\u5b58\u50a8\uff08\u5373\u4f7f\u5b58\u50a8\u6ca1\u6210\u529f\u4e5f\u4f1a\u6267\u884c\u4e0b\u4e00\u6b65\u4ee3\u7801\uff09\u3001\n\n// \u8bfb\u53d6\uff1a\nwx.getStorageSync(key) // \u540c\u6b65 \uff08\u8bfb\u53d6\u5230\u6570\u636e\u5728\u8fdb\u884c\u4e0b\u4e00\u6b65\u64cd\u4f5c\uff09\nwx.setStorage(key) // \u5f02\u6b65",lang:"js"}),a.createElement("h4",{id:"api\u8bbe\u7f6etitle"},a.createElement(l.AnchorLink,{to:"#api\u8bbe\u7f6etitle","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"api\u8bbe\u7f6etitle"),a.createElement(c.Z,{code:"wx.setNavigationBarTitle({\n      title: '',\n})",lang:"js"}),a.createElement("h4",{id:"\u80cc\u666f\u64ad\u653e\u97f3"},a.createElement(l.AnchorLink,{to:"#\u80cc\u666f\u64ad\u653e\u97f3","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u80cc\u666f\u64ad\u653e\u97f3"),a.createElement("p",null,a.createElement(l.Link,{to:"https://developers.weixin.qq.com/miniprogram/dev/api/media/background-audio/BackgroundAudioManager.html"},"BackgroundAudioManager")," \u5168\u5c40\u552f\u4e00\u7684\u80cc\u666f\u97f3\u9891\u7ba1\u7406\u5668"),a.createElement(c.Z,{code:'// \u9700\u8981\u5728app.json\u914d\u7f6e\uff0c\u624d\u80fd\u4f7f\u7528\u540e\u53f0\u97f3\u4e50\u64ad\u653e\u7684\u80fd\u529b\n\n"requiredBackgroundModes": ["audio", "location"]',lang:"json"}),a.createElement(c.Z,{code:"// \u83b7\u53d6\u5168\u5c40\u552f\u4e00\u7684\u80cc\u666f\u97f3\u9891\u7ba1\u7406\u5668\nconst backgroundAudioManager = wx.getBackgroundAudioManager()\n\n\nbackgroundAudioManager.src = \u97f3\u9891\u94fe\u63a5\nbackgroundAudioManager.title = \u97f3\u9891\u6807\u9898",lang:"js"}),a.createElement("h4",{id:"createselectorquery\u67e5\u8be2\u8282\u70b9\u4fe1\u606f"},a.createElement(l.AnchorLink,{to:"#createselectorquery\u67e5\u8be2\u8282\u70b9\u4fe1\u606f","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"createSelectorQuery\u67e5\u8be2\u8282\u70b9\u4fe1\u606f"),a.createElement("p",null,a.createElement(l.Link,{to:"https://developers.weixin.qq.com/miniprogram/dev/api/wxml/wx.createSelectorQuery.html"},"createSelectorQuery")," \u5c0f\u7a0b\u5e8f\u7684\u65b9\u6cd5\uff0c\u7528\u4e8e\u67e5\u8be2\u8282\u70b9\u7b49\u64cd\u4f5c"),a.createElement(c.Z,{code:"const query = wx.createSelectorQuery()\nquery.select('#the-id').boundingClientRect() // \u8282\u70b9\u7684\u5e03\u5c40\u4fe1\u606f\nquery.selectViewport().scrollOffset()\nquery.exec(function(res){\n  res[0].top       // #the-id\u8282\u70b9\u7684\u4e0a\u8fb9\u754c\u5750\u6807\n  res[1].scrollTop // \u663e\u793a\u533a\u57df\u7684\u7ad6\u76f4\u6eda\u52a8\u4f4d\u7f6e\n})",lang:"js"}),a.createElement("h4",{id:"\u7ec4\u4ef6\u5185\u7684\u65b9\u6cd5"},a.createElement(l.AnchorLink,{to:"#\u7ec4\u4ef6\u5185\u7684\u65b9\u6cd5","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u7ec4\u4ef6\u5185\u7684\u65b9\u6cd5"),a.createElement("p",null,a.createElement(l.Link,{to:"https://developers.weixin.qq.com/miniprogram/dev/reference/api/Component.html"},"Component(Object object)")),a.createElement("h4",{id:"\u7ec4\u4ef6\u751f\u547d\u5468\u671f"},a.createElement(l.AnchorLink,{to:"#\u7ec4\u4ef6\u751f\u547d\u5468\u671f","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u7ec4\u4ef6\u751f\u547d\u5468\u671f"),a.createElement("p",null,a.createElement(l.Link,{to:"https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/lifetimes.html"},"lifetimes")),a.createElement(c.Z,{code:"// \u751f\u547d\u5468\u671f\nlifetimes: {\n    ready() { // \u5728\u7ec4\u4ef6\u5728\u89c6\u56fe\u5c42\u5e03\u5c40\u5b8c\u6210\u540e\u6267\u884c\n   \t ...\n    }\n},",lang:"js"}),a.createElement("h5",{id:"\u7ec4\u4ef6\u6240\u5728\u9875\u9762\u7684\u751f\u547d\u5468\u671f"},a.createElement(l.AnchorLink,{to:"#\u7ec4\u4ef6\u6240\u5728\u9875\u9762\u7684\u751f\u547d\u5468\u671f","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u7ec4\u4ef6\u6240\u5728\u9875\u9762\u7684\u751f\u547d\u5468\u671f"),a.createElement(c.Z,{code:"Component({\n  pageLifetimes: {\n    show: function() {\n      // \u9875\u9762\u88ab\u5c55\u793a\n    },\n    hide: function() {\n      // \u9875\u9762\u88ab\u9690\u85cf\n    },\n    resize: function(size) {\n      // \u9875\u9762\u5c3a\u5bf8\u53d8\u5316\n    }\n  }\n})",lang:"js"}),a.createElement("h4",{id:"\u7ec4\u4ef6\u5bf9\u6570\u636e\u7684\u76d1\u542c"},a.createElement(l.AnchorLink,{to:"#\u7ec4\u4ef6\u5bf9\u6570\u636e\u7684\u76d1\u542c","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u7ec4\u4ef6\u5bf9\u6570\u636e\u7684\u76d1\u542c"),a.createElement("p",null,a.createElement(l.Link,{to:"https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/observer.html"},"observers")),a.createElement(c.Z,{code:"observers: { // \u5bf9\u6570\u636e\u7684\u76d1\u542c(\u6570\u636e\u521d\u6b21\u52a0\u8f7d\u5b8c\u6210\u4e5f\u4f1a\u6267\u884c)\n    \u76d1\u542c\u7684\u6570\u636e\u5bf9\u8c61(newData){\n      console.log(newData)\n    }\n},",lang:"js"}),a.createElement("h4",{id:"\u5b50\u7ec4\u4ef6\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u4f20\u9012\u7ed9\u7236\u7ec4\u4ef6"},a.createElement(l.AnchorLink,{to:"#\u5b50\u7ec4\u4ef6\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u4f20\u9012\u7ed9\u7236\u7ec4\u4ef6","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u5b50\u7ec4\u4ef6\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u4f20\u9012\u7ed9\u7236\u7ec4\u4ef6"),a.createElement(c.Z,{code:"\u5b50\u7ec4\u4ef6js\uff1a\n// \u89e6\u53d1\u81ea\u5b9a\u4e49\u4e8b\u4ef6 \u5411\u7236\u7ec4\u4ef6\u4f20\u503c\uff0c \u53c2\u6570x\uff08\u53ef\u9009\uff0c\u4f20\u9012\u7ed9\u7236\u7ec4\u4ef6\u7684\u53c2\u6570\uff0c\u53ef\u4ee5\u662f\u5bf9\u8c61\u6216\u5176\u4ed6\uff09\nthis.triggerEvent('\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u540d', \u53c2\u6570x)\n\n\n\u7236\u7ec4\u4ef6wxml\uff1a\n<\u5b50\u7ec4\u4ef6\u6807\u7b7e bind:\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u540d=\"\u6267\u884c\u7684\u4e8b\u4ef6\" />\n\n\u7236\u7ec4\u4ef6js\uff1a\n\u6267\u884c\u7684\u4e8b\u4ef6(event) {\n\tconsole.log(event.detil.\u53c2\u6570)\n}",lang:"unknown"}),a.createElement("h4",{id:"\u7236\u7ec4\u4ef6\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u4f20\u9012\u7ed9\u5b50\u7ec4\u4ef6"},a.createElement(l.AnchorLink,{to:"#\u7236\u7ec4\u4ef6\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u4f20\u9012\u7ed9\u5b50\u7ec4\u4ef6","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u7236\u7ec4\u4ef6\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u4f20\u9012\u7ed9\u5b50\u7ec4\u4ef6"),a.createElement(c.Z,{code:"\u7236\u7ec4\u4ef6wxml\uff1a\n<\u5b50\u7ec4\u4ef6\u6807\u7b7e class=\"\u5b50\u7ec4\u4ef6\u7c7b\u540d\">\n\n\u7236\u7ec4\u4ef6JS\uff1a\n// \u9009\u62e9\u7ec4\u4ef6\uff0c\u5e76\u4f20\u5165\u4e8b\u4ef6\u548c\u53c2\u6570\nthis.selectComponent('.\u5b50\u7ec4\u4ef6\u7c7b\u540d').\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u540d(\u4f20\u5165\u53c2\u6570)\n\n\u5b50\u7ec4\u4ef6js\uff1a\nmethods: {\n\t\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u540d(\u53c2\u6570x){\n\t\tconsole.log(\u53c2\u6570x)\n\t}\n}",lang:"unknown"}),a.createElement("h4",{id:"\u5144\u5f1f\u7ec4\u4ef6\u95f4\u4f20\u9012\u4e8b\u4ef6\u548c\u4f20\u503c"},a.createElement(l.AnchorLink,{to:"#\u5144\u5f1f\u7ec4\u4ef6\u95f4\u4f20\u9012\u4e8b\u4ef6\u548c\u4f20\u503c","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u5144\u5f1f\u7ec4\u4ef6\u95f4\u4f20\u9012\u4e8b\u4ef6\u548c\u4f20\u503c"),a.createElement(c.Z,{code:"\u4f8b\u5b50\uff1a\u5b50\u7ec4\u4ef61\u5411\u5b50\u7ec4\u4ef62\u4f20\u9012\u53c2\u6570\n\n\u7236\u7ec4\u4ef6wxml\u4e2d\uff1a\n<\u5b50\u7ec4\u4ef6\u6807\u7b7e1 bind:\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u540d1=\"\u6267\u884c\u7684\u4e8b\u4ef6\">\n<\u5b50\u7ec4\u4ef6\u6807\u7b7e2 class=\"\u5b50\u7ec4\u4ef62\u7c7b\u540d\">\n\n\u7236\u7ec4\u4ef6js\uff1a\n\u6267\u884c\u7684\u4e8b\u4ef6(event) {\n\tthis.selectComponent('.\u5b50\u7ec4\u4ef62\u7c7b\u540d').\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u540d2(event.detil.\u53c2\u6570x) // \u5411\u5b50\u7ec4\u4ef62\u4f20\u503c\n}\n\n\u5b50\u7ec4\u4ef61js\uff1a\n// \u89e6\u53d1\u81ea\u5b9a\u4e49\u4e8b\u4ef6 \u5411\u7236\u7ec4\u4ef6\u4f20\u503c\uff0c \u53c2\u6570x\uff08\u53ef\u9009\uff0c\u4f20\u9012\u7ed9\u7236\u7ec4\u4ef6\u7684\u53c2\u6570\uff0c\u53ef\u4ee5\u662f\u5bf9\u8c61\u6216\u5176\u4ed6\uff09\nthis.triggerEvent('\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u540d1', \u53c2\u6570x)\n\n\n\n\u5b50\u7ec4\u4ef62js\uff1a\nmethods: {\n\t\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u540d2(\u53c2\u6570x){\n\t\tconsole.log(\u53c2\u6570x)  // \u63a5\u6536\u7236\u7ec4\u4ef6\u4f20\u5165\u7684\u503c\n\t}\n}",lang:"unknown"}),a.createElement("h4",{id:"\u83b7\u53d6\u624b\u673a\u4fe1\u606f"},a.createElement(l.AnchorLink,{to:"#\u83b7\u53d6\u624b\u673a\u4fe1\u606f","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u83b7\u53d6\u624b\u673a\u4fe1\u606f"),a.createElement("p",null,a.createElement(l.Link,{to:"https://developers.weixin.qq.com/miniprogram/dev/api/base/system/system-info/wx.getSystemInfo.html"},"wx.getSystemInfo(Object object)")),a.createElement(c.Z,{code:"wx.getSystemInfo({\n\tsuccess(res){\n\t\tconsole.log(res) //\u624b\u673a\u4fe1\u606f\n\t}\n})",lang:"js"}),a.createElement("h4",{id:"\u6eda\u52a8\u7ec4\u4ef6"},a.createElement(l.AnchorLink,{to:"#\u6eda\u52a8\u7ec4\u4ef6","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u6eda\u52a8\u7ec4\u4ef6"),a.createElement("p",null,a.createElement(l.Link,{to:"https://developers.weixin.qq.com/miniprogram/dev/component/scroll-view.html"},"scroll-view")),a.createElement(c.Z,{code:'<scroll-view scroll-y scroll-top="{{scrollTop}}" scroll-with-animation="true">\n</scroll-view>',lang:"html"}),a.createElement("h4",{id:"\u5168\u5c40\u5c5e\u6027\u65b9\u6cd5\u7c7b\u4f3cvuex"},a.createElement(l.AnchorLink,{to:"#\u5168\u5c40\u5c5e\u6027\u65b9\u6cd5\u7c7b\u4f3cvuex","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u5168\u5c40\u5c5e\u6027\u3001\u65b9\u6cd5\uff08\u7c7b\u4f3cvuex\uff09"),a.createElement(c.Z,{code:"\u5728app.js\u4e2d\uff1a\n\nonLaunch: function () {\n\tthis.globalData = {// \u8bbe\u7f6e\u5168\u5c40\u5c5e\u6027\u3001\u65b9\u6cd5\n\t\ttest: 0\n\t}\n},\nsetGlobalData(dataItem, val) { // \u8bbe\u7f6e\u5168\u5c40\u5c5e\u6027\n\tthis.globalData[dataItem] = val\n},\ngetGlobalData(dataItem) { // \u83b7\u53d6\u5168\u5c40\u5c5e\u6027\n\treturn this.globalData[dataItem]\n}\n\n\n\u5728\u9700\u8981\u8c03\u7528\u7684\u9875\u9762js\u4e2d\uff1a\nconst app = getApp() // \u5728\u6700\u9876\u90e8\u5148\u8c03\u7528app\u65b9\u6cd5\n\n// \u8bbe\u7f6e\u5168\u5c40\u5c5e\u6027\napp.setGlobalData('test', 1)\n\n// \u83b7\u53d6\u5168\u5c40\u5c5e\u6027\napp.getGlobalData('test')",lang:"unknown"}),a.createElement("h4",{id:"\u6d88\u606f\u63d0\u793a\u6846"},a.createElement(l.AnchorLink,{to:"#\u6d88\u606f\u63d0\u793a\u6846","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u6d88\u606f\u63d0\u793a\u6846"),a.createElement("p",null,a.createElement(l.Link,{to:"https://developers.weixin.qq.com/miniprogram/dev/api/ui/interaction/wx.showToast.html"},"showToast")),a.createElement(c.Z,{code:"wx.showToast({\n  title: '\u6210\u529f',\n  icon: 'success', //\u56fe\u6807\uff1a success \u6210\u529f\u3001loading \u52a0\u8f7d\u4e2d\u3001none \u65e0\n  duration: 2000\n})",lang:"js"}),a.createElement("h2",{id:"\u53d1\u73b0\u9875\u9762"},a.createElement(l.AnchorLink,{to:"#\u53d1\u73b0\u9875\u9762","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u300a\u53d1\u73b0\u300b\u9875\u9762"),a.createElement("h4",{id:"\u8c03\u7528\u7ec4\u4ef6\u5916\u90e8\u7684\u6837\u5f0f"},a.createElement(l.AnchorLink,{to:"#\u8c03\u7528\u7ec4\u4ef6\u5916\u90e8\u7684\u6837\u5f0f","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u8c03\u7528\u7ec4\u4ef6\u5916\u90e8\u7684\u6837\u5f0f"),a.createElement("p",null,"components\u5185\u90e8\u7684\u7ec4\u4ef6\u65e0\u6cd5\u76f4\u63a5\u8c03\u7528\u5916\u90e8\u7684\u6837\u5f0f\u3002\u53ef\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u8c03\u7528\u7ec4\u4ef6\u5916\u90e8\u6837\u5f0f\uff1a"),a.createElement("p",null,a.createElement("strong",null,"\u65b9\u6cd5\u4e00\uff1a")),a.createElement(c.Z,{code:'\u7236\u7ec4\u4ef6wxml\uff1a\n\x3c!-- iconfont \u548c icon-sousuo \u662f\u4f20\u5165\u7ec4\u4ef6\u5185\u90e8\u7684\u6837\u5f0f\u540d\u79f0\uff0ciconfont\uff08\u81ea\u5b9a\u4e49\u540d\u79f0\uff09="iconfont\uff08\u5916\u90e8\u6837\u5f0f\u6587\u4ef6\u4e2d\u5b9a\u4e49\u7684\u6837\u5f0f\u540d\uff09"  --\x3e\n<x-search iconfont="iconfont" icon-sousuo="icon-sousuo"/>\n\n\n\u5b50\u7ec4\u4ef6js:\n// \u7ec4\u4ef6\u5916\u90e8\u6837\u5f0f\n  externalClasses: [\n    \'iconfont\', // \u5bf9\u5e94\u7684\u662f\u4e0a\u9762\u7b49\u53f7\u524d\u9762\u7684\u540d\u79f0\n    \'icon-sousuo\'\n  ],\n\n \u5b50\u7ec4\u4ef6wxml\uff1a \u5373\u53ef\u5b9e\u73b0\u8c03\u7528\u7ec4\u4ef6\u5916\u7684\u6837\u5f0f\n <i class="iconfont icon-sousuo" />\n\n\n  \u6ce8\u610f\uff1a\u5982\u679c\u60f3\u5728\u7ec4\u4ef6\u5185\u90e8\u518d\u6b21\u4fee\u6539\u6837\u5f0f\uff0c\u4e0d\u80fd\u591f\u5f15\u7528\u5916\u90e8\u4f20\u8fdb\u6765\u7684class\u540d\u79f0\u8fdb\u884c\u4fee\u6539\uff0c\u53ef\u4ee5\u53e6\u8d77\u4e00\u4e2aclass\u540d\u79f0\u8fdb\u884c\u4fee\u6539\u3002',lang:"unknown"}),a.createElement("p",null,a.createElement("strong",null,"\u65b9\u6cd5\u4e8c\uff1a")),a.createElement("p",null,a.createElement(l.Link,{to:"https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/wxml-wxss.html#%E7%BB%84%E4%BB%B6%E6%A0%B7%E5%BC%8F%E9%9A%94%E7%A6%BB"},"\u6d88\u9664\u6837\u5f0f\u9694\u79bb")),a.createElement(c.Z,{code:"\u7ec4\u4ef6\u5185:\nComponent({\n  options: {\n    styleIsolation: 'apply-shared'\n  }\n})",lang:"js"}),a.createElement("h4",{id:"\u7ec4\u4ef6\u63d2\u69fdslot"},a.createElement(l.AnchorLink,{to:"#\u7ec4\u4ef6\u63d2\u69fdslot","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u7ec4\u4ef6\u63d2\u69fdslot"),a.createElement("p",null,a.createElement("strong",null,"\u5355\u4e2a\u63d2\u69fd")),a.createElement(c.Z,{code:"\u7236\u7ec4\u4ef6\u8c03\u7528\u4f20\u5165\u63d2\u69fd\u5185\u5bb9:\n<\u7ec4\u4ef6\u6807\u7b7e>\n    <view>\n      <view>\u63d2\u69fd\u5185\u5bb9</view>\n      <view>\u63d2\u69fd\u5185\u5bb9</view>\n    </view>\n</\u7ec4\u4ef6\u6807\u7b7e>\n\n \u7ec4\u4ef6\u5185\u90e8\u5b9a\u4e49slot\u6807\u7b7e:\n <view>\n    \x3c!-- slot\u63d2\u69fd --\x3e\n    <slot></slot>\n</view>",lang:"unknown"}),a.createElement("p",null,a.createElement("strong",null,"\u5982\u679c\u9700\u8981\u5b9e\u73b0\u591a\u4e2a\u63d2\u69fd")),a.createElement(c.Z,{code:'\u7236\u7ec4\u4ef6\u8c03\u7528\u4f20\u5165\u63d2\u69fd\u5185\u5bb9:\n<\u7ec4\u4ef6\u6807\u7b7e>\n    <view slot="slot2">\n      <view>\u63d2\u69fd1\u5185\u5bb9</view>\n      <view>\u63d2\u69fd1\u5185\u5bb9</view>\n    </view>\n\n     <view slot="slot1">\n      <view>\u63d2\u69fd2\u5185\u5bb9</view>\n      <view>\u63d2\u69fd2\u5185\u5bb9</view>\n    </view>\n</\u7ec4\u4ef6\u6807\u7b7e>\n\n\u7ec4\u4ef6js :\noptions: {// \u8bbe\u7f6e\n    multipleSlots: true // \u6253\u5f00\u591a\u4e2a\u63d2\u69fd\u529f\u80fd\n},\n\n\n\u7ec4\u4ef6\u5185\u90e8\u5b9a\u4e49slot\u6807\u7b7e:\n<view>\n    \x3c!-- slot\u63d2\u69fd \u5177\u540d\u63d2\u69fd--\x3e\n    <slot name="slot1"></slot>\n    <slot name="slot2"></slot>\n</view>',lang:"unknown"}),a.createElement("h4",{id:"\u5224\u65ad\u7528\u6237\u6388\u6743"},a.createElement(l.AnchorLink,{to:"#\u5224\u65ad\u7528\u6237\u6388\u6743","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u5224\u65ad\u7528\u6237\u6388\u6743"),a.createElement("p",null,a.createElement(l.Link,{to:"https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/authorize.html"},"\u6388\u6743")),a.createElement(c.Z,{code:"// \u5224\u65ad\u7528\u6237\u662f\u5426\u6388\u6743\n    wx.getSetting({\n      success: (res) => { // \u8fd9\u91cc\u4f7f\u7528\u7bad\u5934\u51fd\u6570\u53ef\u6539\u53d8\u5185\u90e8this\u6307\u5411\u4e3a\u5916\u90e8\u7684this\n        console.log(res)\n        if (res.authSetting['scope.userInfo']) { // \u5df2\u6388\u6743\n         wx.getUserInfo({ // \u83b7\u53d6\u7528\u6237\u4fe1\u606f\n           success(res) {\n             console.log(res)\n           }\n         })\n        } else { // \u672a\u6388\u6743\n\n        }\n      }\n    })",lang:"js"}),a.createElement("h4",{id:"button\u7684\u5f00\u53d1\u80fd\u529b\u83b7\u53d6\u7528\u6237\u4fe1\u606f1"},a.createElement(l.AnchorLink,{to:"#button\u7684\u5f00\u53d1\u80fd\u529b\u83b7\u53d6\u7528\u6237\u4fe1\u606f1","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"button\u7684\u5f00\u53d1\u80fd\u529b\uff08\u83b7\u53d6\u7528\u6237\u4fe1\u606f\uff091"),a.createElement(c.Z,{code:'<button class="login"\n    open-type="getUserInfo"\n    bindgetuserinfo="onGetUserInfo"     // bindgetuserinfo \u4e3a\u56fa\u5b9a\u7684\n>\n\t\u83b7\u53d6\u5fae\u4fe1\u6388\u6743\u4fe1\u606f\n</button>\n\n\nbindgetuserinfo \u4e8b\u4ef6\u4f1a\u8be2\u95ee\u7528\u6237\u662f\u5426\u540c\u610f\u6388\u6743\n\n\njs\u4e2d\uff1a\n    onGetUserInfo(event) { // \u83b7\u53d6\u7528\u6237\u4fe1\u606f\n      const userInfo = event.detail.userInfo\n      if (userInfo) { // \u7528\u6237\u5141\u8bb8\u6388\u6743\n        this.setData({\n          modalShow: false\n        })\n        this.triggerEvent(\'loginSuccess\', userInfo) // \u7ed9\u7236\u7ec4\u4ef6\u4f20\u7528\u6237\u6570\u636e\n      } else { // \u7528\u6237\u62d2\u7edd\u6388\u6743\n        this.triggerEvent(\'loginFail\')\n      }\n    }',lang:"js"}),a.createElement("h4",{id:"\u539f\u751f\u7ec4\u4ef6"},a.createElement(l.AnchorLink,{to:"#\u539f\u751f\u7ec4\u4ef6","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u539f\u751f\u7ec4\u4ef6"),a.createElement("p",null,a.createElement(l.Link,{to:"https://developers.weixin.qq.com/miniprogram/dev/component/native-component.html"},"\u539f\u751f\u7ec4\u4ef6")),a.createElement(c.Z,{code:'auto-focus \u81ea\u52a8\u83b7\u53d6\u7126\u70b9\n\n<textarea\n    class="content"\n    placeholder="\u5206\u4eab\u65b0\u9c9c\u4e8b..."\n    maxlength="140"\n    auto-focus\n    bindinput="onInput"\n    bindfocus="onFocus"\n    bindblur="onBlur"\n  ></textarea>',lang:"html"}),a.createElement("h4",{id:"\u9009\u62e9\u4e0a\u4f20\u56fe\u7247"},a.createElement(l.AnchorLink,{to:"#\u9009\u62e9\u4e0a\u4f20\u56fe\u7247","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u9009\u62e9\u4e0a\u4f20\u56fe\u7247"),a.createElement("p",null,a.createElement(l.Link,{to:"https://developers.weixin.qq.com/miniprogram/dev/api/media/image/wx.chooseImage.html"},"\u4e0a\u4f20\u56fe\u7247")),a.createElement(c.Z,{code:"let max = 9 - this.data.images.length // \u8fd8\u80fd\u518d\u9009\u51e0\u5f20\u56fe\u7247\nwx.chooseImage({\n      count: max, // \u8fd8\u80fd\u518d\u9009\u51e0\u5f20\u56fe\u7247\n      sizeType: ['original', 'compressed'], // \u521d\u59cb\u503c and \u538b\u7f29\u8fc7\u7684\n      sourceType: ['album', 'camera'], // \u624b\u673a\u76f8\u518c\u9009\u62e9 and \u62cd\u7167\u9009\u62e9\n      success: (res) => { // \u7bad\u5934\u51fd\u6570\u6539\u53d8this\u6307\u5411\n        console.log(res)\n      },\n    })",lang:"js"}),a.createElement("h4",{id:"\u56fe\u7247\u88c1\u526a"},a.createElement(l.AnchorLink,{to:"#\u56fe\u7247\u88c1\u526a","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u56fe\u7247\u88c1\u526a"),a.createElement("p",null,a.createElement(l.Link,{to:"https://developers.weixin.qq.com/miniprogram/dev/component/image.html"},"\u56fe\u7247\u88c1\u526a")),a.createElement(c.Z,{code:'\x3c!-- mode \u56fe\u7247\u88c1\u526a aspectFill \u4fdd\u8bc1\u77ed\u8fb9\u5b8c\u6574\u663e\u793a --\x3e\n<image class="image" src="{{item}}" mode="aspectFill"></image>',lang:"html"}),a.createElement("h4",{id:"\u83b7\u53d6\u6807\u7b7e\u81ea\u5b9a\u4e49\u5c5e\u6027data--\u5220\u9664\u56fe\u7247\u7684\u5b9e\u73b0"},a.createElement(l.AnchorLink,{to:"#\u83b7\u53d6\u6807\u7b7e\u81ea\u5b9a\u4e49\u5c5e\u6027data--\u5220\u9664\u56fe\u7247\u7684\u5b9e\u73b0","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u83b7\u53d6\u6807\u7b7e\u81ea\u5b9a\u4e49\u5c5e\u6027data-* \uff08\u5220\u9664\u56fe\u7247\u7684\u5b9e\u73b0\uff09"),a.createElement(c.Z,{code:'\x3c!-- \u663e\u793a\u56fe\u7247 --\x3e\n    <block wx:for="{{images}}" wx:key="*this">\n      <view class="image-wrap">\n        \x3c!-- mode \u56fe\u7247\u88c1\u526a aspectFill \u4fdd\u8bc1\u77ed\u8fb9\u5b8c\u6574\u663e\u793a --\x3e\n        <image class="image" src="{{item}}" mode="aspectFill"></image>\n        <icon class="iconfont icon-shanchu" bindtap="onDelImage" data-index="{{index}}"></icon>\n      </view>\n    </block>\n\n\n    // \u5220\u9664\u56fe\u7247\n  onDelImage(event) {\n  \t// event.target.dataset.index \u83b7\u53d6\u6807\u7b7e\u5c5e\u6027data-index\u7684\u503c\n    this.data.images.splice(event.target.dataset.index, 1) // splice\u4f1a\u6539\u53d8\u539f\u6709\u6570\u7ec4\n    this.setData({\n      images: this.data.images\n    })\n  },',lang:"unknown"}),a.createElement("h4",{id:"\u5168\u5c4f\u9884\u89c8\u56fe\u7247\u70b9\u51fb\u56fe\u7247\u653e\u5927\u9884\u89c8"},a.createElement(l.AnchorLink,{to:"#\u5168\u5c4f\u9884\u89c8\u56fe\u7247\u70b9\u51fb\u56fe\u7247\u653e\u5927\u9884\u89c8","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u5168\u5c4f\u9884\u89c8\u56fe\u7247(\u70b9\u51fb\u56fe\u7247\u653e\u5927\u9884\u89c8)"),a.createElement("p",null,a.createElement(l.Link,{to:"https://developers.weixin.qq.com/miniprogram/dev/api/media/image/wx.previewImage.html"},"\u5168\u5c4f\u9884\u89c8\u56fe\u7247")),a.createElement(c.Z,{code:"// \u5168\u5c4f\u9884\u89c8\u56fe\u7247\n  onPreviewImage(event) {\n    wx.previewImage({\n      urls: this.data.images, // \u56fe\u7247\u5730\u5740\u5217\u8868\n      current: event.target.dataset.imgsrc // \u5f53\u524d\u9884\u89c8\u56fe\u7247\u5730\u5740\n    })\n  },",lang:"js"}),a.createElement("h4",{id:"\u6587\u4ef6\u4e0a\u4f20\u4e91\u5b58\u50a8\u53d1\u5e03\u535a\u5ba2\u4f8b\u5b50"},a.createElement(l.AnchorLink,{to:"#\u6587\u4ef6\u4e0a\u4f20\u4e91\u5b58\u50a8\u53d1\u5e03\u535a\u5ba2\u4f8b\u5b50","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u6587\u4ef6\u4e0a\u4f20\u4e91\u5b58\u50a8\uff08\u53d1\u5e03\u535a\u5ba2\u4f8b\u5b50\uff09"),a.createElement("p",null,a.createElement(l.Link,{to:"https://developers.weixin.qq.com/miniprogram/dev/wxcloud/reference-client-api/storage/uploadFile.html"},"\u6587\u4ef6\u4e0a\u4f20\u4e91\u5b58\u50a8")),a.createElement(c.Z,{code:"//  \u7ed3\u5408'\u53d1\u5e03'\u7684\u4f8b\u5b50\uff1a\n  send() {\n    // \u9a8c\u8bc1\u662f\u5426\u8f93\u5165\u5185\u5bb9\n    if (content.trim() === '') { // trim() \u53bb\u6389\u5b57\u7b26\u4e32\u7a7a\u683c\n      wx.showToast({\n        title: '\u8bf7\u8f93\u5165\u5185\u5bb9',\n        icon: 'none'\n      })\n      return\n    }\n    wx.showLoading({\n      title: '\u53d1\u5e03\u4e2d',\n    })\n    /**\n     * \u5b9e\u73b0\u601d\u8def\u53ca\u6b65\u9aa4\uff1a\n     * 1\u3001\u56fe\u7247 -> \u4e0a\u4f20 \u4e91\u5b58\u50a8  -> \u751f\u6210 \u56fe\u7247fineID\uff08\u4e91\u6587\u4ef6ID\uff09\n     * 2\u3001\u6570\u636e -> \u5f55\u5165 \u4e91\u6570\u636e\u5e93\n     *    \u6570\u636e\u5305\u62ec\uff1a\u6587\u5b57\u5185\u5bb9\u3001\u56fe\u7247fineID\u3001\u6635\u79f0\u3001\u5934\u50cf\u3001\u53d1\u5e03\u65f6\u95f4\u3001openId(\u7528\u6237\u552f\u4e00\u6807\u8bc6\uff0c\u5728\u63d2\u5165\u6570\u636e\u5e93\u662f\u7cfb\u7edf\u4f1a\u81ea\u52a8\u6dfb\u52a0_openId\u5b57\u6bb5\uff0c\u4e0d\u9700\u8981\u53e6\u5916\u63d2\u5165)\n     */\n    let promiseArr = []\n    let fileIds = []\n    // \u56fe\u7247\u4e0a\u4f20\u4e91\u5b58\u50a8\n    this.data.images.forEach((item) => {\n      let p = new Promise((resolve, reject) => {\n        let suffix = /\\.\\w+$/.exec(item)[0] // \u6587\u4ef6\u6269\u5c55\u540d(\u6587\u4ef6\u540e\u7f00)\n        wx.cloud.uploadFile({ // \u6bcf\u6b21\u53ea\u80fd\u4e0a\u4f20\u4e00\u4e2a\u6587\u4ef6\n          /**\n           * cloudPath \u4e91\u8def\u5f84\u3002\u5982\u679c\u8def\u5f84\u76f8\u540c\uff0c\u540e\u4e0a\u4f20\u7684\u6587\u4ef6\u4f1a\u8986\u76d6\u539f\u6587\u4ef6\n           * \u8def\u5f84\uff1ablog/\u4e91\u5b58\u50a8\u4e2d\u7684\u6587\u4ef6\u5939 + Date.now()\u65f6\u95f4\u6233 + Math.random()*1000000\u968f\u673a\u6570 + \u6587\u4ef6\u540e\u7f00\n           */\n          cloudPath: 'blog/' + Date.now() + '-' + Math.random() * 1000000 + suffix,\n          filePath: item, // \u6587\u4ef6\u672c\u5730\u4e34\u65f6\u8def\u5f84\n          success: (res) => {\n            fileIds.push(res.fileID)\n            resolve()\n          },\n          fail: (err) => {\n            console.error(err)\n            reject()\n          }\n        })\n      })\n      promiseArr.push(p)\n    })\n\n    // \u5b58\u5165\u4e91\u6570\u636e\u5e93\n    Promise.all(promiseArr).then((res) => {\n      db.collection('blog').add({\n        data: {\n          ...userInfo, // \u6635\u79f0\u3001\u5934\u50cf\n          content, // \u5185\u5bb9\n          img: fileIds, // \u56fe\u7247fileID\u5217\u8868\n          createTime: db.serverDate() // \u521b\u5efa\u65f6\u95f4\uff0c\u53d6\u670d\u52a1\u7aef\u65f6\u95f4\n        }\n      }).then((res) => {\n        wx.hideLoading()\n        wx.showToast({\n          title: '\u53d1\u5e03\u6210\u529f',\n        })\n        // \u8fd4\u56de\u535a\u5ba2\u9875\u9762\uff0c\u5e76\u5237\u65b0\n        wx.navigateBack()\n\n      })\n    }).catch((err) => {\n      wx.hideLoading()\n      wx.showToast({\n        title: '\u62b1\u6b49\uff0c\u53d1\u5e03\u5931\u8d25',\n        icon: 'none'\n      })\n    })\n  },",lang:"js"}),a.createElement("h4",{id:"js\u6a21\u5757\u5316-\u65f6\u95f4\u683c\u5f0f\u5316"},a.createElement(l.AnchorLink,{to:"#js\u6a21\u5757\u5316-\u65f6\u95f4\u683c\u5f0f\u5316","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"js\u6a21\u5757\u5316 \uff08\u65f6\u95f4\u683c\u5f0f\u5316\uff09"),a.createElement("p",null,"\u5728\u76ee\u5f55utils \u4e2d\u65b0\u5efaformatTime.js\u6587\u4ef6"),a.createElement(c.Z,{code:"// \u65f6\u95f4\u683c\u5f0f\u5316 \u6a21\u5757\u5c01\u88c5\nmodule.exports = (date) => { // date \u6570\u636e\u683c\u5f0f\u4e3a date\n  let fmt = 'yyyy-MM-dd hh:mm:ss' // \u9884\u5b9a\u683c\u5f0f\n  const o = {\n    // + \u6b63\u5219\u4e2d\u76841\u4e2a\u6216\u591a\u4e2a\n    'M+': date.getMonth() + 1,\n    'd+': date.getDate(),\n    'h+': date.getHours(),\n    'm+': date.getMinutes(),\n    's+': date.getSeconds()\n  }\n\n  if (/(y+)/.test(fmt)) {\n    // $1 \u8868\u793a\u6b63\u5219\u4e2d\u7684\u7b2c\u4e00\u4e2a\uff0c\u5373(y+)\n    fmt = fmt.replace(RegExp.$1, date.getFullYear()) // replace \u66ff\u6362\n  }\n\n  for (let k in o) {\n    if (new RegExp('('+ k +')').test(fmt)) {\n      fmt = fmt.replace(RegExp.$1, o[k].toString().length === 1 ? '0' + o[k] : o[k])\n    }\n  }\n\n  return fmt\n}",lang:"js"}),a.createElement("p",null,"\u5728\u7ec4\u4ef6\u5f15\u5165js\u6a21\u5757"),a.createElement(c.Z,{code:"import formatTime from '../../utils/formatTime.js'\n\n\u4f7f\u7528\uff1a\nformatTime(new Date('Wed Aug 28 2019 16:23:06 GMT+0800 (\u4e2d\u56fd\u6807\u51c6\u65f6\u95f4)'))",lang:"js"}),a.createElement("h4",{id:"\u963b\u6b62\u4e8b\u4ef6\u5192\u6ce1-1"},a.createElement(l.AnchorLink,{to:"#\u963b\u6b62\u4e8b\u4ef6\u5192\u6ce1-1","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u963b\u6b62\u4e8b\u4ef6\u5192\u6ce1"),a.createElement("p",null,a.createElement("code",null,"bind")," \u548c ",a.createElement("code",null,"catch")," \u90fd\u53ef\u4ee5\u7ed1\u5b9a\u4e8b\u4ef6\uff0c\u5b83\u4eec\u7684\u533a\u522b\u662f ",a.createElement("code",null,"bind")," \u6709\u4e8b\u4ef6\u5192\u6ce1\uff0c\u800c ",a.createElement("code",null,"catch")," \u6ca1\u6709"),a.createElement("h4",{id:"\u8fd4\u56de\u4e0a\u4e00\u4e2a\u9875\u9762\u5e76\u6267\u884c\u65b9\u6cd5"},a.createElement(l.AnchorLink,{to:"#\u8fd4\u56de\u4e0a\u4e00\u4e2a\u9875\u9762\u5e76\u6267\u884c\u65b9\u6cd5","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u8fd4\u56de\u4e0a\u4e00\u4e2a\u9875\u9762\u5e76\u6267\u884c\u65b9\u6cd5"),a.createElement("p",null,a.createElement(l.Link,{to:"https://developers.weixin.qq.com/miniprogram/dev/api/route/wx.navigateBack.html"},"API")),a.createElement(c.Z,{code:"// \u8fd4\u56de\u535a\u5ba2\u9875\u9762\uff0c\u5e76\u5237\u65b0\n wx.navigateBack()\n const pages = getCurrentPages() // \u83b7\u53d6\u5f53\u524d\u9875\u9762\u6808\n const prevPage = pages[pages.length - 2]  // \u53d6\u5230\u4e0a\u4e00\u4e2a\u9875\u9762\n prevPage.onPullDownRefresh() // \u6267\u884c\u4e0a\u4e00\u4e2a\u9875\u9762\u7684\u65b9\u6cd5 onPullDownRefresh",lang:"js"}),a.createElement("h4",{id:"\u56fe\u7247\u61d2\u52a0\u8f7d"},a.createElement(l.AnchorLink,{to:"#\u56fe\u7247\u61d2\u52a0\u8f7d","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u56fe\u7247\u61d2\u52a0\u8f7d"),a.createElement("p",null,a.createElement(l.Link,{to:"https://developers.weixin.qq.com/miniprogram/dev/component/image.html"},"API")),a.createElement(c.Z,{code:'\u7ed9image\u6807\u7b7e\u8bbe\u7f6e lazy-load \u4e3a true\n<image class="img" src="{{item}}" lazy-load="true"></image>\n\n.img {\n  background: #eee;\n}',lang:"html"}),a.createElement("p",null,a.createElement("strong",null,"\u61d2\u52a0\u8f7d\u5360\u4f4d\u56fe\u53ef\u4ee5\u7ed9image\u8bbe\u7f6e\u80cc\u666f\u56fe\u6216\u80cc\u666f\u8272")),a.createElement("h4",{id:"\u6a21\u7cca\u67e5\u8be2"},a.createElement(l.AnchorLink,{to:"#\u6a21\u7cca\u67e5\u8be2","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u6a21\u7cca\u67e5\u8be2"),a.createElement(c.Z,{code:"// \u83b7\u53d6\u535a\u5ba2\u5217\u8868\n  app.router('blogList', async (ctx, next) => {\n    const keyword = event.keyword // \u641c\u7d22\u5173\u952e\u5b57 \u8c03\u7528\u63a5\u53e3\u65f6\u4f20\u9012\u6765\u7684\u6570\u636e\n    let w = {}\n    if (keyword.trim() != '') {\n      w = {\n        content: db.RegExp({ // \u6b63\u5219\n          regexp: keyword,\n          options: 'i' // i\u8868\u793a\u5ffd\u7565\u5927\u5c0f\u5199\n        })\n      }\n    }\n\n    // where\u67e5\u8be2\u6761\u4ef6 skip \u4ece\u7b2c\u51e0\u6761\u5f00\u59cb\u67e5\uff0climit \u67e5\u51e0\u6761\u6570\u636e\uff0corderBy(\u6392\u5e8f\u5b57\u6bb5\uff0c\u6392\u5e8f\u65b9\u5f0f) \u6392\u5e8f\uff0c\u6392\u5e8f\u65b9\u5f0fdesc\u964d\u5e8f/asc\u5347\u5e8f\n    ctx.body =  await blogCollection.where(w).skip(event.start).limit(event.count)\n    .orderBy('createTime', 'desc').get().then((res) => {\n      return res.data\n    })\n\n  })",lang:"js"}),a.createElement("h4",{id:"\u63d0\u5347\u6a21\u7cca\u67e5\u8be2\u7684\u6548\u7387-\u6dfb\u52a0\u7d22\u5f15\u5bf9\u6570\u636e\u91cf\u5927\u7684\u67e5\u8be2\u6548\u679c\u660e\u663e"},a.createElement(l.AnchorLink,{to:"#\u63d0\u5347\u6a21\u7cca\u67e5\u8be2\u7684\u6548\u7387-\u6dfb\u52a0\u7d22\u5f15\u5bf9\u6570\u636e\u91cf\u5927\u7684\u67e5\u8be2\u6548\u679c\u660e\u663e","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u63d0\u5347\u6a21\u7cca\u67e5\u8be2\u7684\u6548\u7387 \uff08\u6dfb\u52a0\u7d22\u5f15\uff0c\u5bf9\u6570\u636e\u91cf\u5927\u7684\u67e5\u8be2\u6548\u679c\u660e\u663e\uff09"),a.createElement("p",null,"\u4e91\u5f00\u53d1\u63a7\u5236\u53f0  > \u6570\u636e\u5e93\u76f8\u5e94\u7684\u96c6\u5408 > \u7d22\u5f15\u7ba1\u7406 > \u6dfb\u52a0\u7d22\u5f15 > \u8f93\u5165\u81ea\u5b9a\u4e49\u7d22\u5f15\u540d\u79f0\u3001\u8be5\u5b57\u6bb5\u7684\u503c\u662f\u5426\u552f\u4e00\u3001\u88ab\u67e5\u8be2\u7684\u5b57\u6bb5\u540d\u3001\u5347\u5e8f/\u964d\u5e8f > ok"),a.createElement("h4",{id:"\u5c0f\u7a0b\u5e8f\u7aef\u8c03\u7528\u4e91\u6570\u636e\u5e93"},a.createElement(l.AnchorLink,{to:"#\u5c0f\u7a0b\u5e8f\u7aef\u8c03\u7528\u4e91\u6570\u636e\u5e93","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u5c0f\u7a0b\u5e8f\u7aef\u8c03\u7528\u4e91\u6570\u636e\u5e93"),a.createElement("p",null,"\u4e00\u822c\u8c03\u7528\u4e91\u6570\u636e\u5e93\u7684\u64cd\u4f5c\u90fd\u5199\u5728\u4e91\u51fd\u6570\u5185\uff0c\u5176\u5b9e\u5c0f\u7a0b\u5e8f\u7aef\u4e5f\u53ef\u4ee5\u5bf9\u6570\u636e\u5e93\u8fdb\u884c\u64cd\u4f5c\u3002"),a.createElement("p",null,"\u5c0f\u7a0b\u5e8f\u7aef\u4e00\u6b21\u6700\u591a\u53ea\u80fd\u67e5\u8be220\u6761\u6570\u636e\uff0c\u4e91\u51fd\u6570\u7aef\u6700\u591a\u53ef\u67e5\u8be2100\u6761\u6570\u636e\uff0c\u53ef\u4f7f\u7528\u591a\u6b21\u67e5\u8be2\u62fc\u63a5\u7684\u65b9\u5f0f\u7a81\u7834\u9650\u5236\u3002"),a.createElement(c.Z,{code:"// \u5c0f\u7a0b\u5e8f\u7aef\u8c03\u7528\u4e91\u6570\u636e\u5e93\u793a\u4f8b\n    const db = wx.cloud.database() // \u521d\u59cb\u5316\u6570\u636e\u5e93\n    db.collection('blog').orderBy('createTime','deac').get().then((res) => {\n      console.log(res)\n    })",lang:"js"}),a.createElement("h4",{id:"\u4e91\u6570\u636e\u5e93\u6743\u9650\u7ba1\u7406-1"},a.createElement(l.AnchorLink,{to:"#\u4e91\u6570\u636e\u5e93\u6743\u9650\u7ba1\u7406-1","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u4e91\u6570\u636e\u5e93\u6743\u9650\u7ba1\u7406"),a.createElement("p",null,a.createElement("strong",null,"\u6ce8\u610f\uff1a\u4e91\u63a7\u5236\u53f0\u548c\u670d\u52a1\u7aef\uff08\u4e91\u51fd\u6570\uff09\u59cb\u7ec8\u6709\u6240\u6709\u6570\u636e\u8bfb\u5199\u6743\u9650\uff0c")),a.createElement("p",null,a.createElement("strong",null,"\u4f46\u6743\u9650\u7684\u7ba1\u7406\u4ec5\u5bf9\u5c0f\u7a0b\u5e8f\u7aef\u53d1\u8d77\u7684\u8bf7\u6c42\u6709\u6548\u3002")),a.createElement("ul",null,a.createElement("li",null,a.createElement("p",null,"\u4ec5\u521b\u5efa\u8005\u53ef\u5199\uff0c\u6240\u6709\u4eba\u53ef\u8bfb \uff08\u9002\u5408\u4e8e\u6587\u7ae0\uff09")),a.createElement("li",null,a.createElement("p",null,"\u4ec5\u521b\u5efa\u8005\u53ef\u8bfb\u5199 (\u9002\u7528\u4e8e\u79c1\u5bc6\u5185\u5bb9)")),a.createElement("li",null,a.createElement("p",null,"\u4ec5\u7ba1\u7406\u7aef\u53ef\u5199\uff0c\u6240\u6709\u4eba\u53ef\u8bfb\uff08\u9002\u7528\u4e8e\u5546\u54c1\u4fe1\u606f\uff09")),a.createElement("li",null,a.createElement("p",null,"\u4ec5\u7ba1\u7406\u7aef\u53ef\u8bfb\u5199\uff08\u9002\u7528\u4e8e\u540e\u53f0\u654f\u611f\u6570\u636e\uff09"))),a.createElement("h4",{id:"\u6570\u636e\u5e93\u4e2d1\u5bf9n\u5173\u7cfb\u7684\u4e09\u79cd\u8bbe\u8ba1\u65b9\u5f0f"},a.createElement(l.AnchorLink,{to:"#\u6570\u636e\u5e93\u4e2d1\u5bf9n\u5173\u7cfb\u7684\u4e09\u79cd\u8bbe\u8ba1\u65b9\u5f0f","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u6570\u636e\u5e93\u4e2d1\u5bf9N\u5173\u7cfb\u7684\u4e09\u79cd\u8bbe\u8ba1\u65b9\u5f0f"),a.createElement("h5",{id:"\u7b2c\u4e00\u79cdn\u7684\u6570\u91cf\u8f83\u5c11-\u51e0\u5341\u4e2a\u4ee5\u5185"},a.createElement(l.AnchorLink,{to:"#\u7b2c\u4e00\u79cdn\u7684\u6570\u91cf\u8f83\u5c11-\u51e0\u5341\u4e2a\u4ee5\u5185","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u7b2c\u4e00\u79cd\uff1aN\u7684\u6570\u91cf\u8f83\u5c11 \u51e0\u5341\u4e2a\u4ee5\u5185"),a.createElement("p",null,a.createElement("strong",null,"1 \u6761\u8bb0\u5f55\u5b58\u50a8 N \u4e2a\u5b50\u6570\u636e")),a.createElement("p",null,"\u200b \u5982\u4e00\u6761\u535a\u5ba2\u4e2d\uff0c\u6700\u591a\u67099\u5f20\u56fe\u7247\uff0c\u8fd99\u5f20\u56fe\u7247\u53ef\u548c\u5176\u4ed6\u6570\u636e\u653e\u5728\u4e00\u4e2a\u8bb0\u5f55\u4e2d\u3002"),a.createElement(c.Z,{code:"[\n\t{\n\t\tid:...\n\t\timg:[\n\t\t'...', '...', '...', '...', '...', '...', '...', '...', '...'\n\t\t]\n\t}\n]",lang:"js"}),a.createElement("h5",{id:"\u7b2c\u4e8c\u79cdn\u7684\u6570\u91cf\u8f83\u591a--\u51e0\u5341\u5230\u51e0\u767e\u4e2a"},a.createElement(l.AnchorLink,{to:"#\u7b2c\u4e8c\u79cdn\u7684\u6570\u91cf\u8f83\u591a--\u51e0\u5341\u5230\u51e0\u767e\u4e2a","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u7b2c\u4e8c\u79cd\uff1aN\u7684\u6570\u91cf\u8f83\u591a  \u51e0\u5341\u5230\u51e0\u767e\u4e2a"),a.createElement("p",null,a.createElement("strong",null,"1 \u5b58\u50a8 \u6bcf\u4e2aN\u7684 id")),a.createElement("p",null,"\u53ef\u5206\u4e24\u4e2a\u6570\u636e\u5e93\u96c6\u5408\uff0c"),a.createElement("p",null,"\u4e00\u4e2a\u4e3a '\u76ee\u5f55' \u96c6\u5408\uff0c\u5b58\u653e '\u8be6\u60c5' \u96c6\u5408\u4e0b\u7684\u6bcf\u6761\u6570\u636e\u7684 id \u76ee\u5f55"),a.createElement("p",null,"\u4e00\u4e2a\u4e3a '\u8be6\u60c5' \u96c6\u5408\uff0c\u6bcf\u6761\u6570\u636e\u5bf9\u5e94\u4e00\u4e2a\u5355\u72ec\u7684 id \u548c \u8be6\u7ec6\u6570\u636e"),a.createElement(c.Z,{code:"\u76ee\u5f55\u96c6\u5408\uff1a\n[\n\t{\n\t\t'id':\"11\",\n\t\t'name': '\u4ea7\u54c11',\n\t\t'xqs': ['111','222','333', ... ]  // \u5b58\u653e \u8be6\u60c5\u96c6\u5408 \u4e2d\u7684\u6bcf\u6761\u6570\u636e id\n\t}\n]\n\n\n\n\u8be6\u60c5\u96c6\u5408\uff1a\n[\n{'id':\"111\",name:'\u96f6\u4ef61',title:'...' ...},\n{'id':\"222\",name:'\u96f6\u4ef62',title:'...' ...},\n{'id':\"333\",name:'\u96f6\u4ef63',title:'...' ...},\n...\n]",lang:"js"}),a.createElement("p",null,"\u5982\u6b4c\u5355\u5217\u8868\uff0c\u4e0e\u6b4c\u66f2\u8be6\u60c5\u7684\u6570\u636e\u7ec4\u5408\u8bbe\u8ba1\u3002"),a.createElement("h5",{id:"\u7b2c\u4e09\u79cdn\u7684\u6570\u91cf\u5de8\u5927--\u51e0\u767e\u6210\u5343\u4e0a\u4e07\u4e2a"},a.createElement(l.AnchorLink,{to:"#\u7b2c\u4e09\u79cdn\u7684\u6570\u91cf\u5de8\u5927--\u51e0\u767e\u6210\u5343\u4e0a\u4e07\u4e2a","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u7b2c\u4e09\u79cd\uff1aN\u7684\u6570\u91cf\u5de8\u5927  \u51e0\u767e\u6210\u5343\u4e0a\u4e07\u4e2a"),a.createElement("p",null,a.createElement("strong",null,"\u6bcf\u4e2a N \u90fd\u5b58\u50a8 1 \u7684 id")),a.createElement("p",null,"\u5982\u65b0\u6d6a\u535a\u5ba2\u4e2d\u7684\u4e00\u6761\u535a\u5ba2\u4e0b\u9762\u6709\u51e0\u5343\u6761\u8bc4\u8bba"),a.createElement(c.Z,{code:"\u4e00\u6761\u65b0\u6d6a\u535a\u5ba2\uff1a\n[{\n\t'id':'11',\n\t'content':'\u535a\u5ba2\u5185\u5bb9'\n\t...\n}]\n\n\n\u4e0a\u5343\u6761\u8bc4\u4ef7\uff1a\n[\n{\n\t'id':'111111'\n\t'blogId':'11', // \u8fd9\u4e2aid\u5bf9\u5e94\u7684\u662f\u90a3\u4e00\u6761\u535a\u5ba2\u7684id\n\t'content': '\u8bc4\u4ef7\u5185\u5bb91'\n},\n{\n\t'id':'222222'\n\t'blogId':'11', // \u8fd9\u4e2aid\u5bf9\u5e94\u7684\u662f\u90a3\u4e00\u6761\u535a\u5ba2\u7684id\n\t'content': '\u8bc4\u4ef7\u5185\u5bb92'\n},\n{\n\t'id':'33333'\n\t'blogId':'11', // \u8fd9\u4e2aid\u5bf9\u5e94\u7684\u662f\u90a3\u4e00\u6761\u535a\u5ba2\u7684id\n\t'content': '\u8bc4\u4ef7\u5185\u5bb93'\n},\n...\n]",lang:"js"}),a.createElement("h4",{id:"\u4e91\u8c03\u7528"},a.createElement(l.AnchorLink,{to:"#\u4e91\u8c03\u7528","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u4e91\u8c03\u7528"),a.createElement("p",null,"\u901a\u8fc7\u4e91\u51fd\u6570\u8c03\u7528\u670d\u52a1\u7aef\u7684\u5f00\u53d1\u63a5\u53e3"),a.createElement("p",null,"\u8fd9\u4e9b\u63a5\u53e3\u5982\uff1a\u6a21\u677f\u6d88\u606f\u63a8\u9001\u3001\u751f\u6210\u5c0f\u7a0b\u5e8f\u7801..."),a.createElement("h4",{id:"\u6a21\u677f\u6d88\u606f\u63a8\u9001"},a.createElement(l.AnchorLink,{to:"#\u6a21\u677f\u6d88\u606f\u63a8\u9001","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u6a21\u677f\u6d88\u606f\u63a8\u9001"),a.createElement("p",null,a.createElement("strong",null,'1\u3001\u4f7f\u7528from\u8868\u5355\u624d\u80fd\u89e6\u53d1\u6d88\u606f\u63a8\u9001\uff0c\u5e76\u8bbe\u7f6ereport-submit="true"')),a.createElement(c.Z,{code:'<form slot="modal-content" report-submit="true" bind:submit="onSend">\n    <textarea name="content" class="comment-content" placeholder="\u5199\u8bc4\u8bba" value="{{content}}" fixed="true"></textarea>\n    <button class="send" form-type="submit">\u53d1\u9001</button>\n  </form>',lang:"html"}),a.createElement("p",null,a.createElement("strong",null,"2\u3001\u9700\u8981\u5230\u5fae\u4fe1\u516c\u4f17\u5e73\u53f0\u505a\u76f8\u5e94\u7684\u8bbe\u7f6e\uff1a")),a.createElement("p",null,"\u5fae\u4fe1\u516c\u4f17\u5e73\u53f0 >  \u529f\u80fd > \u6a21\u677f\u6d88\u606f > \u6dfb\u52a0\u6a21\u677f > \u9009\u62e9\u76f8\u5e94\u7684\u6a21\u677f> \u6dfb\u52a0\u6210\u529f\u540e\u4f1a\u6709\u4e00\u4e2a\u6a21\u677fID"),a.createElement("p",null,a.createElement("strong",null,"3\u3001\u65b0\u5efa\u4e00\u4e2a\u4e91\u51fd\u6570\uff0c\u7528\u4e8e\u4e91\u8c03\u7528\u3002\u5728\u8be5\u4e91\u51fd\u6570\u4e0b\u65b0\u5efa\u914d\u7f6e\u6587\u4ef6\uff1aconfig.json \uff0c\u7528\u4e8e\u914d\u7f6e\u6743\u9650")),a.createElement("p",null,"config.json \uff1a"),a.createElement(c.Z,{code:'{\n  "permissions": {\n    "openapi": [\n      "templateMessage.send"\n    ]\n  }\n}',lang:"json"}),a.createElement("p",null,"\u4e91\u51fd\u6570\u8bbe\u7f6e\u6d88\u606f\u63a8\u9001\uff1a"),a.createElement(c.Z,{code:"// \u4e91\u51fd\u6570\u5165\u53e3\u51fd\u6570\nexports.main = async (event, context) => {\n  // \u83b7\u53d6openid\n  const { OPENID } = cloud.getWXContext()\n\n  // \u6a21\u677f\u63a8\u9001\u6d88\u606f\n  const result = await cloud.openapi.templateMessage.send({\n    touser: OPENID,\n    page: `/pages/blog-comment/blog-comment?blogId=${event.blogId}`, // \u7528\u6237\u70b9\u51fb\u63a8\u9001\u6d88\u606f\u6253\u5f00\u7684\u9875\u9762\n    data: { // \u6a21\u677f\u7684\u5185\u5bb9\uff0ckeyword\u4e3a\u5728\u516c\u4f17\u5e73\u53f0\u8bbe\u7f6e\u6a21\u677f\u65f6\u5bf9\u5e94\u7684\u5b57\u6bb5\n      keyword1: { // \u8bc4\u4ef7\u5185\u5bb9\n        value: event.context\n      },\n      keyword2: { // \u8bc4\u4ef7\u65f6\u95f4\n        value: event.time\n      }\n    },\n    templateId: 'LNwKMcYwlz-0HabgBhmZi6CWZrlNSBiNJ2h0SMorcxQ', // \u6a21\u677fid\uff0c\u5230\u516c\u4f17\u5e73\u53f0\u6a21\u677f\u6d88\u606f\u4e0a\u83b7\u53d6\n    formId: event.formId // \u89e6\u53d1\u6d88\u606f\u63a8\u9001\u7684form\u8868\u5355\u7684id\n  })\n\n  return result\n}",lang:"js"}),a.createElement("p",null,a.createElement("strong",null,"4\u3001\u5728\u63d0\u4ea4\u8868\u5355\u4e8b\u4ef6\u5b8c\u6210\u540e\u8c03\u7528\u6d88\u606f\u63a8\u9001\u4e91\u51fd\u6570")),a.createElement(c.Z,{code:"wx.cloud.callFunction({\n          name: 'sendMessage',\n          data: {\n            content,\n            formId,\n            blogId: this.properties.blogId\n          }\n        }).then((res) => {\n          console.log(res)\n        })",lang:"js"}),a.createElement("h4",{id:"\u4e91\u51fd\u6570\u591a\u96c6\u5408\u67e5\u8be2\u6570\u636e\u5e93"},a.createElement(l.AnchorLink,{to:"#\u4e91\u51fd\u6570\u591a\u96c6\u5408\u67e5\u8be2\u6570\u636e\u5e93","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u4e91\u51fd\u6570\u591a\u96c6\u5408\u67e5\u8be2\u6570\u636e\u5e93"),a.createElement(c.Z,{code:"// \u535a\u5ba2\u8be6\u60c5(\u535a\u5ba2\u5185\u5bb9\u3001\u8bc4\u8bba)\n  app.router('blogDetail', async(ctx, next) => {\n    let blogId = event.blogId\n\n    // \u535a\u5ba2\u5185\u5bb9\n    let detail = await blogCollection.where({\n      _id: blogId\n    }).get().then((res) => {\n      return res.data\n    })\n\n    // \u8bc4\u8bba\u67e5\u8be2\n    const countResult = await blogCollection.count()\n    const total = countResult.total\n    let commentList = {\n      data: []\n    }\n    if (total > 0) {\n      // \u7a81\u7834100\u6761\u9650\u5236\n      const batchTimes = Math.ceil(total / MAX_LIMIT)\n      const tasks = []\n      for (let i = 0; i < batchTimes; i++) {\n        let promise = db.collection('blog-comment').skip(i * MAX_LIMIT)\n          .limit(MAX_LIMIT).where({\n            blogId\n          }).orderBy('createTime', 'desc').get()\n        tasks.push(promise)\n      }\n      if (tasks.length > 0) {\n        commentList = (await Promise.all(tasks)).reduce((acc, cur) => {\n          return {\n            data: acc.data.concat(cur.data)\n          }\n        })\n      }\n\n    }\n    ctx.body = {\n      detail,\n      commentList\n    }\n  })",lang:"js"}),a.createElement("h4",{id:"\u5206\u4eab\u529f\u80fd"},a.createElement(l.AnchorLink,{to:"#\u5206\u4eab\u529f\u80fd","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u5206\u4eab\u529f\u80fd"),a.createElement("p",null,'\u5206\u4eab\u529f\u80fd\u9700\u8981button\u6807\u7b7e\uff0c\u8bbe\u7f6eopen-type="share"'),a.createElement(c.Z,{code:'<button open-type="share" data-blogid="{{blogId}}" data-blog="{{blog}}" class="share-btn" hover-class="share-hover">\n      <i class="iconfont icon-fenxiang icon"></i>\n      <text>\u5206\u4eab</text>\n    </button>',lang:"html"}),a.createElement("p",null,"\u5728js\u4e2d\u6709onShareAppMessage\u65b9\u6cd5\uff0c\u70b9\u51fbbutton\u4f1a\u81ea\u52a8\u6267\u884c\u6b64\u65b9\u6cd5"),a.createElement(c.Z,{code:"onShareAppMessage: function (event) {\n    console.log(event)\n\n    // \u5bf9\u5206\u4eab\u5361\u7247\u7684\u8bbe\u7f6e\n    let blogObj = event.target.dataset.blog\n    return {\n      title: blogObj.content,\n      path: `/pages/blog-comment/blog-comment?blogId=${blogObj._id}`,\n      // imageUrl: '' // \u81ea\u5b9a\u4e49\u56fe\u7247\uff0c\u4e0d\u652f\u6301\u4e91\u5b58\u50a8\u7684\u56fe\u7247\n    }\n  }",lang:"js"}),a.createElement("h4",{id:"\u4e0d\u540c\u573a\u666f\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u7684\u65b9\u5f0f"},a.createElement(l.AnchorLink,{to:"#\u4e0d\u540c\u573a\u666f\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u7684\u65b9\u5f0f","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u4e0d\u540c\u573a\u666f\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u7684\u65b9\u5f0f"),a.createElement("h5",{id:"\u573a\u666f\u4e00\u53ea\u60f3\u5728\u754c\u9762\u4e0a\u663e\u793a\u81ea\u5df1\u7684\u6635\u79f0\u548c\u5934\u50cf"},a.createElement(l.AnchorLink,{to:"#\u573a\u666f\u4e00\u53ea\u60f3\u5728\u754c\u9762\u4e0a\u663e\u793a\u81ea\u5df1\u7684\u6635\u79f0\u548c\u5934\u50cf","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u573a\u666f\u4e00\uff1a\u53ea\u60f3\u5728\u754c\u9762\u4e0a\u663e\u793a\u81ea\u5df1\u7684\u6635\u79f0\u548c\u5934\u50cf"),a.createElement("p",null,"\u4ee5\u7ec4\u4ef6\u7684\u65b9\u5f0f\uff1a\u6839\u636etype\u7c7b\u578b\u83b7\u53d6\u4e0d\u540c\u7528\u6237\u6570\u636e"),a.createElement("p",null,a.createElement("strong",null,"\u8be5\u65b9\u5f0f\u4e0d\u9700\u8981\u6388\u6743\uff0c\u53ea\u80fd\u7528\u4e8e\u5728wxml\u663e\u793a\u81ea\u5df1\u7684\u4fe1\u606f")),a.createElement("p",null,a.createElement(l.Link,{to:"https://developers.weixin.qq.com/miniprogram/dev/component/open-data.html"},"open-data")),a.createElement(c.Z,{code:'<open-data type="userAvatarUrl"></open-data>\n<open-data type="userNickName"></open-data>\n...',lang:"html"}),a.createElement("h5",{id:"\u573a\u666f\u4e8c\u5728js\u4e2d\u83b7\u53d6\u7528\u6237\u4fe1\u606f"},a.createElement(l.AnchorLink,{to:"#\u573a\u666f\u4e8c\u5728js\u4e2d\u83b7\u53d6\u7528\u6237\u4fe1\u606f","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u573a\u666f\u4e8c\uff1a\u5728JS\u4e2d\u83b7\u53d6\u7528\u6237\u4fe1\u606f"),a.createElement("p",null,"\u8be5\u65b9\u5f0f\u8981\u5728\u7528\u6237\u6388\u6743\u4ee5\u540e\u624d\u80fd\u83b7\u53d6\u7528\u6237\u4fe1\u606f"),a.createElement("p",null,a.createElement(l.Link,{to:"https://developers.weixin.qq.com/miniprogram/dev/api/open-api/user-info/wx.getUserInfo.html"},"wx.getUserInfo")),a.createElement(c.Z,{code:"wx.getUserInfo({\n      success: (res) => {\n        console.log(res)\n      }\n    })",lang:"js"}),a.createElement("p",null,"\u5728\u672a\u6388\u6743\u7684\u60c5\u51b5\u4e0b\u9700\u8981\u7528\u6237\u5148\u6388\u6743\uff1a"),a.createElement(c.Z,{code:"// \u5224\u65ad\u7528\u6237\u662f\u5426\u6388\u6743\n      wx.getSetting({\n        success: (res) => { // \u8fd9\u91cc\u4f7f\u7528\u7bad\u5934\u51fd\u6570\u53ef\u6539\u53d8\u5185\u90e8this\u6307\u5411\u4e3a\u5916\u90e8\u7684this\n          if (res.authSetting['scope.userInfo']) { // \u5df2\u6388\u6743\n            wx.getUserInfo({ // \u83b7\u53d6\u7528\u6237\u4fe1\u606f\n              success: (res) => { // \u8fd9\u91cc\u4f7f\u7528\u7bad\u5934\u51fd\u6570\u53ef\u6539\u53d8\u5185\u90e8this\u6307\u5411\u4e3a\u5916\u90e8\u7684this\n\n                app.setGlobalData('userInfo', res.userInfo) // \u8bbe\u7f6eapp\u5168\u5c40\u5c5e\u6027\n\n                this.onLoginSuccess({\n                  detail: res.userInfo\n                })\n              }\n            })\n          } else { // \u672a\u6388\u6743\n            this.setData({ // \u6253\u5f00\u5f39\u51fa\u5c42\uff0c\u663e\u793a\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u6309\u94ae\n              modalShow: true\n            })\n          }\n        }\n      })\n\n\n  \u6388\u6743\u6309\u94ae\n <button class=\"login\" open-type=\"getUserInfo\" bindgetuserinfo=\"onGetUserInfo\">\u83b7\u53d6\u5fae\u4fe1\u6388\u6743\u4fe1\u606f</button>\n\n\n    onGetUserInfo(event) { // \u83b7\u53d6\u7528\u6237\u4fe1\u606f\n      const userInfo = event.detail.userInfo\n      if (userInfo) { // \u7528\u6237\u5141\u8bb8\u6388\u6743\n        this.setData({\n          modalShow: false\n        })\n        this.triggerEvent('loginSuccess', userInfo) // \u7ed9\u7236\u7ec4\u4ef6\u4f20\u7528\u6237\u6570\u636e\n      } else { // \u7528\u6237\u62d2\u7edd\u6388\u6743\n        this.triggerEvent('loginFail')\n      }\n    }",lang:"js"}),a.createElement("blockquote",null,a.createElement("p",null,"\u6ce8\u610f\uff1a\u4e0a\u9762\u8fd9\u79cd\u65b9\u5f0f\u6ca1\u6709\u83b7\u53d6\u5230openId")),a.createElement("h5",{id:"\u573a\u666f\u4e09\u83b7\u53d6openid"},a.createElement(l.AnchorLink,{to:"#\u573a\u666f\u4e09\u83b7\u53d6openid","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u573a\u666f\u4e09\uff1a\u83b7\u53d6openId"),a.createElement("p",null,a.createElement("strong",null,"\u83b7\u53d6openId\u4e0d\u9700\u8981\u7528\u6237\u6388\u6743")),a.createElement("p",null,"1\u3001\u4f20\u7edf\u5f00\u53d1\u65b9\u5f0f\u83b7\u53d6openId\uff0c\u540e\u53f0\u670d\u52a1\u5668\u7531\u81ea\u5df1\u5f00\u53d1\uff0c\u6ca1\u4f7f\u7528\u4e91\u5f00\u53d1"),a.createElement("p",null,"\u5c0f\u7a0b\u5e8f\u7aef                 \u5fae\u4fe1\u670d\u52a1\u5668            \u540e\u7aef\u670d\u52a1\u5668"),a.createElement("p",null,"\u6b65\u9aa4\uff1a"),a.createElement("p",null,"\u5c0f\u7a0b\u5e8f\u7aef \u8c03\u7528 wx.login \u5411\u5fae\u4fe1\u670d\u52a1\u5668 \u83b7\u53d6code"),a.createElement("p",null,"\u5c0f\u7a0b\u5e8f\u7aef \u8c03\u7528 wx.request \u5c06 code \u4f20\u9012\u7ed9 \u540e\u7aef\u670d\u52a1\u5668"),a.createElement("p",null,"\u540e\u7aef\u670d\u52a1\u5668 \u4f7f\u7528code \u5411\u5fae\u4fe1\u670d\u52a1\u5668 \u6362\u53d6openid\u548csession_key"),a.createElement("p",null,"\u540e\u7aef\u670d\u52a1\u5668 \u5c06openid \u53d1\u9001\u7ed9 \u5c0f\u7a0b\u5e8f\u7aef"),a.createElement("p",null,"2\u3001\u4e91\u5f00\u53d1\u65b9\u5f0f\u83b7\u53d6openId"),a.createElement("p",null,"\u4e91\u51fd\u6570login\u4e2d"),a.createElement(c.Z,{code:"// \u83b7\u53d6 WX Context (\u5fae\u4fe1\u8c03\u7528\u4e0a\u4e0b\u6587)\uff0c\u5305\u62ec OPENID\u3001APPID\u3001\u53ca UNIONID\uff08\u9700\u6ee1\u8db3 UNIONID \u83b7\u53d6\u6761\u4ef6\uff09\n  const wxContext = cloud.getWXContext()\n\n  return {\n    event,\n    openid: wxContext.OPENID,\n    appid: wxContext.APPID,\n    unionid: wxContext.UNIONID,\n  }",lang:"js"}),a.createElement(c.Z,{code:"\u666e\u901a\u6309\u94ae\n<button bindtap=\"getOpenid\">\u83b7\u53d6openid</button>\n\ngetOpenid() {\n\twx.cloud.callFunction({\n\t\tname: 'login'\n\t}).then((res) => {\n\t\tconsole.log(res)\n\t})\n}",lang:"js"}),a.createElement("blockquote",null,a.createElement("p",null,"openid \u5728\u5c0f\u7a0b\u5e8f\u548c\u516c\u4f17\u53f7\u4e0b\u662f\u4e0d\u4e00\u6837\u7684"),a.createElement("p",null,"unionid \u5728\u5c0f\u7a0b\u5e8f\u548c\u516c\u4f17\u53f7\u4e0b\u90fd\u662f\u4e00\u6837\u7684")),a.createElement("h2",{id:"\u6211\u7684\u9875\u9762"},a.createElement(l.AnchorLink,{to:"#\u6211\u7684\u9875\u9762","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u300a\u6211\u7684\u300b\u9875\u9762"),a.createElement("p",null,"json\u6587\u4ef6"),a.createElement(c.Z,{code:'"navigationBarTitleText": "\u6211\u7684",\n  "disableScroll": true  // \u4f7f\u9875\u9762\u65e0\u6cd5\u6eda\u52a8',lang:"js"}),a.createElement("h4",{id:"\u5bfc\u822a\u9875\u9762\u94fe\u63a5\u8df3\u8f6c"},a.createElement(l.AnchorLink,{to:"#\u5bfc\u822a\u9875\u9762\u94fe\u63a5\u8df3\u8f6c","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u5bfc\u822a\u9875\u9762\u94fe\u63a5\u8df3\u8f6c"),a.createElement("p",null,a.createElement(l.Link,{to:"https://developers.weixin.qq.com/miniprogram/dev/component/navigator.html"},"navigator")),a.createElement("h4",{id:"\u80cc\u666f\u56fe\u7247"},a.createElement(l.AnchorLink,{to:"#\u80cc\u666f\u56fe\u7247","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u80cc\u666f\u56fe\u7247"),a.createElement("p",null,"wxss\u80cc\u666f\u56fe\u7247\u4e0d\u652f\u6301\u672c\u5730\u76f8\u5bf9\u8def\u5f84\u7684\u56fe\u7247\uff0c\u53ea\u652f\u6301\u7f51\u7edc\u56fe\u7247\u548cbase64\u56fe\u7247"),a.createElement("p",null,"\u5efa\u8bae\u4f7f\u7528base64\u56fe\u7247\uff0c\u56fe\u7247\u6587\u4ef6\u6700\u597d\u4e0d\u8981\u592a\u5927\u3002"),a.createElement("h4",{id:"\u6bcf\u4e2a\u9875\u9762\u90fd\u6709\u7684page\u6807\u7b7e"},a.createElement(l.AnchorLink,{to:"#\u6bcf\u4e2a\u9875\u9762\u90fd\u6709\u7684page\u6807\u7b7e","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u6bcf\u4e2a\u9875\u9762\u90fd\u6709\u7684page\u6807\u7b7e"),a.createElement(c.Z,{code:"page {\n  background-color: #f1f1f1;\n}",lang:"js"}),a.createElement("h4",{id:"\u64ad\u653e\u5386\u53f2\u4e0e\u672c\u5730\u5b58\u50a8"},a.createElement(l.AnchorLink,{to:"#\u64ad\u653e\u5386\u53f2\u4e0e\u672c\u5730\u5b58\u50a8","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u64ad\u653e\u5386\u53f2\u4e0e\u672c\u5730\u5b58\u50a8"),a.createElement("p",null,"\u65b9\u6848\u4e00\uff1a\u64ad\u653e\u5386\u53f2\u5b58\u50a8\u5728\u6570\u636e\u5e93\u5f53\u4e2d\uff0c\u8fd9\u6837\u5728\u4e0d\u540c\u8bbe\u5907\u8bbf\u95ee\u90fd\u53ef\u67e5\u770b\u64ad\u653e\u5386\u53f2\u3002\u8bfb\u53d6\u901f\u5ea6\u76f8\u5bf9\u8f83\u6162"),a.createElement("p",null,"\u65b9\u6848\u4e8c\uff1a\u64ad\u653e\u5386\u53f2\u5b58\u50a8\u5728\u672c\u5730\uff0c\u4ec5\u5f53\u524d\u8bbe\u5907\u53ef\u67e5\u770b\u64ad\u653e\u5386\u53f2\u3002\u8bfb\u53d6\u901f\u5ea6\u8f83\u5feb"),a.createElement("p",null,"\u672c\u9879\u76ee\u91c7\u7528\u672c\u5730\u5b58\u50a8\uff1a"),a.createElement("p",null,"\u4f7f\u7528openid\u4f5c\u4e3a\u672c\u5730\u5b58\u50a8\u7684key\uff0c\u64ad\u653e\u5386\u53f2\u5b58\u5165value"),a.createElement("p",null,"\u5728app.js\u4e2d\u83b7\u53d6openid\uff0c\u5373\u6253\u5f00\u5c0f\u7a0b\u5e8f\u5c31\u83b7\u53d6openid\u3002"),a.createElement(c.Z,{code:"// app.js\nonLaunch: function () {\n\tthis.getOpenid() // \u83b7\u53d6openid\u5e76\u5b58\u50a8\n},\ngetOpenid() { // \u83b7\u53d6openid\u5e76\u5b58\u50a8\n    wx.cloud.callFunction({\n      name: 'login'\n    }).then((res) => {\n      const openid = res.result.openid\n      this.globalData.openid = openid // \u4fdd\u5b58\u5230\u5168\u5c40\u53d8\u91cf\n      if (wx.getStorageSync(openid) == '') { // \u8be5\u7528\u6237\u4ece\u672a\u6253\u5f00\u8fc7\u5c0f\u7a0b\u5e8f\uff0c\u672a\u5b58\u50a8\u8fc7openid\u5728\u672c\u5730\n        wx.setStorageSync(openid, []) // \u5b58\u50a8openid\u5230\u672c\u5730\n      }\n    })\n  }",lang:"js"}),a.createElement("p",null,"\u6b4c\u66f2\u64ad\u653e\u65f6"),a.createElement(c.Z,{code:"// \u4fdd\u5b58\u64ad\u653e\u5386\u53f2\u5230\u672c\u5730\u5b58\u50a8\n  savePlayHistory() {\n    const currentSong = musiclist[nowPlayingIndex] // \u5f53\u524d\u64ad\u653e\u6b4c\u66f2\n    const openid = app.globalData.openid // \u4ece\u5168\u5c40\u5c5e\u6027\u83b7\u53d6openid\n    const playHistory = wx.getStorageSync(openid) // \u4ece\u672c\u5730\u5b58\u50a8\u83b7\u53d6\u64ad\u653e\u5386\u53f2\u6570\u7ec4\n\n    for (let i = 0, len = playHistory.length; i < len; i++) {\n      if (playHistory[i].id === currentSong.id) { // \u5f53\u524d\u64ad\u653e\u6b4c\u66f2\u5df2\u5b58\u5728\u64ad\u653e\u5386\u53f2\u4e2d\n        playHistory.splice(i, 1) // \u5220\u9664\u539f\u7eaa\u5f55\n        break\n      }\n    }\n\n    playHistory.unshift(currentSong) // \u5728\u6570\u7ec4\u5f00\u5934\u63d2\u5165\n    wx.setStorage({ // \u5b58\u5165\u672c\u5730\n      key: openid,\n      data: playHistory\n    })\n\n  },",lang:"js"}),a.createElement("p",null,"\u64ad\u653e\u5386\u53f2\u9875\u9762\u83b7\u53d6"),a.createElement(c.Z,{code:"onLoad: function (options) {\n\n    const openid = app.globalData.openid //\u4ece\u5168\u5c40\u5c5e\u6027\u83b7\u53d6openid\n    const playHistory = wx.getStorageSync(openid) // \u8bfb\u53d6\u672c\u5730\u64ad\u653e\u5386\u53f2\u6570\u636e\n\n    if (playHistory.length !== 0) { // \u6709\u64ad\u653e\u5386\u53f2\n      this.setData({\n        playHistory\n      })\n      wx.setStorage({ // storage\u91cc\u628amusiclist\uff08\u64ad\u653e\u5217\u8868\uff09\u7684\u5185\u5bb9\u6362\u6210\u64ad\u653e\u5386\u53f2\u7684\u5217\u8868\n        key: 'musiclist',\n        data: playHistory,\n      })\n    }\n\n  },",lang:"js"}),a.createElement("h4",{id:"\u6211\u7684\u53d1\u73b0"},a.createElement(l.AnchorLink,{to:"#\u6211\u7684\u53d1\u73b0","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u6211\u7684\u53d1\u73b0"),a.createElement("p",null,"\u4ee3\u7801\u5206\u522b\u6f14\u793a\u4e86\u4ece\u4e91\u51fd\u6570\u548c\u5c0f\u7a0b\u5e8f\u7aef\u83b7\u53d6\u6570\u636e\uff0c\u4ece\u5c0f\u7a0b\u5e8f\u7aef\u83b7\u53d6\u6570\u636e\u4eab\u6709",a.createElement("strong",null,"\u6743\u9650\u7ba1\u7406"),"\u7684\u80fd\u529b\uff0c\u4e0d\u9700\u8981\u4f20openid\u3002"),a.createElement("h4",{id:"\u5c0f\u7a0b\u5e8f\u7801"},a.createElement(l.AnchorLink,{to:"#\u5c0f\u7a0b\u5e8f\u7801","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u5c0f\u7a0b\u5e8f\u7801"),a.createElement("p",null,a.createElement(l.Link,{to:"https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/qr-code.html"},"\u83b7\u53d6\u5c0f\u7a0b\u5e8f\u7801")),a.createElement("p",null,"\u672c\u9879\u76ee\u6f14\u793a\u4f7f\u7528",a.createElement(l.Link,{to:"https://developers.weixin.qq.com/miniprogram/dev/api-backend/open-api/qr-code/wxacode.getUnlimited.html"},"\u63a5\u53e3 B\uff1a\u9002\u7528\u4e8e\u9700\u8981\u7684\u7801\u6570\u91cf\u6781\u591a\u7684\u4e1a\u52a1\u573a\u666f")," ",a.createElement("code",null,"\u4e91\u8c03\u7528")," \u7684\u65b9\u5f0f\u3002"),a.createElement("p",null,"\u6b65\u9aa4\uff1a"),a.createElement("ul",null,a.createElement("li",null,a.createElement("p",null,"\u521b\u5efa\u4e91\u51fd\u6570 gteQRCode")),a.createElement("li",null,a.createElement("p",null,"gteQRCode\u4e91\u51fd\u6570\u4e0b\u521b\u5efaconfig.json\u914d\u7f6e\u6743\u9650\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a"))),a.createElement(c.Z,{code:'{\n  "permissions":{\n    "openapi":[\n      "wxacode.getUnlimited"\n    ]\n  }\n}',lang:"json"}),a.createElement(c.Z,{code:"// \u4e91\u51fd\u6570\u5165\u53e3\u51fd\u6570\nexports.main = async (event, context) => {\n  const wxContext = cloud.getWXContext()\n\n  const result = await cloud.openapi.wxacode.getUnlimited({\n    scene: wxContext.OPENID, // \u94fe\u63a5\u53c2\u6570 \u4e0d\u4e00\u5b9a\u4f20openid\uff0c\u53ef\u4f20\u5176\u4ed6\u4efb\u610f\u6570\u636e\uff0c\u7136\u540e\u901a\u8fc7\u6b64\u6570\u636e\uff0c\u5728\u522b\u4eba\u626b\u7801\u8fdb\u5165\u65f6\u5c31\u53ef\u7528\u4e8e\u5224\u65ad\n    // page: \"pages/blog/blog\" // \u9ed8\u8ba4\u8fdb\u5165\u4e3b\u9875\n    // lineColor: { // \u7ebf\u6761\u989c\u8272\n    //   'r': 211,\n    //   'g': 60,\n    //   'b': 57\n    // },\n    // isHyaline: true // \u662f\u5426\u900f\u660e\n  })\n\n  // result\u4e3a\u4e8c\u8fdb\u5236\u6570\u636e, \u5148\u4e0a\u4f20\u5230\u4e91\u5b58\u50a8\n\n  // \u4e0a\u4f20\u4e91\u5b58\u50a8\n  const upload = await cloud.uploadFile({\n    cloudPath: 'qrcode/qrcode' + Date.now() + Math.random() + '.png',\n    fileContent: result.buffer\n  })\n\n  return upload.fileID\n}",lang:"js"}),a.createElement("h5",{id:"\u5224\u65ad\u662f\u4ece\u626b\u7801\u5c0f\u7a0b\u5e8f\u7801\u8fdb\u5165\u4ee5\u53ca\u53c2\u6570\u83b7\u53d6"},a.createElement(l.AnchorLink,{to:"#\u5224\u65ad\u662f\u4ece\u626b\u7801\u5c0f\u7a0b\u5e8f\u7801\u8fdb\u5165\u4ee5\u53ca\u53c2\u6570\u83b7\u53d6","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u5224\u65ad\u662f\u4ece\u626b\u7801\u5c0f\u7a0b\u5e8f\u7801\u8fdb\u5165\uff0c\u4ee5\u53ca\u53c2\u6570\u83b7\u53d6"),a.createElement(c.Z,{code:"// \u5728\u4ece\u5c0f\u7a0b\u5e8f\u7801\u8fdb\u5165\u7684\u9875\u9762js\uff0conLoad\u65b9\u6cd5\u4e2d\uff0c\n\nonLoad: function (options) {\n\tconsole.log(options.scene) // \u83b7\u53d6\u5230\u5c0f\u7a0b\u5e8f\u7801\u8fdb\u5165\u7684\u53c2\u6570\n}",lang:"js"}),a.createElement("h3",{id:"\u7248\u672c\u66f4\u65b0\u68c0\u6d4b"},a.createElement(l.AnchorLink,{to:"#\u7248\u672c\u66f4\u65b0\u68c0\u6d4b","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u7248\u672c\u66f4\u65b0\u68c0\u6d4b"),a.createElement(c.Z,{code:"// app.js\nonLaunch: function(options) {\n    this.checkUpate()\n},\ncheckUpate(){\n    const updateManager = wx.getUpdateManager()\n    // \u68c0\u6d4b\u7248\u672c\u66f4\u65b0\n    updateManager.onCheckForUpdate((res)=>{\n      if (res.hasUpdate){\n        updateManager.onUpdateReady(()=>{\n          wx.showModal({\n            title: '\u66f4\u65b0\u63d0\u793a',\n            content: '\u65b0\u7248\u672c\u5df2\u7ecf\u51c6\u5907\u597d\uff0c\u662f\u5426\u91cd\u542f\u5e94\u7528',\n            success(res){\n              if(res.confirm){\n                updateManager.applyUpdate()\n              }\n            }\n          })\n        })\n      }\n    })\n  },",lang:"js"}),a.createElement("h3",{id:"\u6027\u80fd\u4f18\u5316"},a.createElement(l.AnchorLink,{to:"#\u6027\u80fd\u4f18\u5316","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u6027\u80fd\u4f18\u5316"),a.createElement("p",null,a.createElement(l.Link,{to:"https://developers.weixin.qq.com/miniprogram/dev/framework/performance/tips.html"},"\u5b98\u7f51\u6587\u6863\u4f18\u5316\u5efa\u8bae")),a.createElement("p",null,"\u4f7f\u7528\u5f00\u53d1\u8005\u5de5\u5177\u7684\u8c03\u8bd5\u5668\uff0cAudits\u8fdb\u884c\u8bc4\u5206\uff0c\u7136\u540e\u6839\u636e\u63d0\u793a\u9488\u5bf9\u9879\u76ee\u8fdb\u884c\u4f18\u5316\u3002"),a.createElement("h3",{id:"\u573a\u666f\u503cscene\u7684\u4f5c\u7528\u4e0e\u5e94\u7528\u573a\u666f"},a.createElement(l.AnchorLink,{to:"#\u573a\u666f\u503cscene\u7684\u4f5c\u7528\u4e0e\u5e94\u7528\u573a\u666f","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u573a\u666f\u503cscene\u7684\u4f5c\u7528\u4e0e\u5e94\u7528\u573a\u666f"),a.createElement("p",null,a.createElement(l.Link,{to:"https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/scene.html"},"\u573a\u666f\u503c")),a.createElement("p",null,"\u573a\u666f\u503c\u7528\u6765\u63cf\u8ff0\u7528\u6237\u8fdb\u5165\u5c0f\u7a0b\u5e8f\u7684\u8def\u5f84\u3002\u5b8c\u6574\u573a\u666f\u503c\u7684\u542b\u4e49\u8bf7\u67e5\u770b",a.createElement(l.Link,{to:"https://developers.weixin.qq.com/miniprogram/dev/reference/scene-list.html"},"\u573a\u666f\u503c\u5217\u8868"),"\u3002"),a.createElement("p",null,"\u53ef\u6839\u636e\u4e0d\u540c\u573a\u666f\u8fdb\u5165\u5b9e\u73b0\u4e0d\u540c\u4e1a\u52a1\u5904\u7406\uff0c\u6bd4\u5982\u4e00\u4e2a\u70b9\u9910\u5c0f\u7a0b\u5e8f\uff0c\u5e97\u5bb6\u5185\u8d34\u4e86\u5c0f\u7a0b\u5e8f\u7801\uff0c\u7528\u6237\u901a\u8fc7\u626b\u7801\u8fdb\u5165\uff0c\u53ef\u7acb\u5373\u8fdb\u5165\u70b9\u9910\u9875\u9762\uff0c\u7b49\u7b49"),a.createElement("p",null,"\u5728app.js\u4e2d\u7684onLaunch(options) \u3001onShow(options)\uff0coptions\u5305\u542bscene\u573a\u666f\u503c"),a.createElement("p",null,a.createElement("strong",null,"\u5f00\u53d1\u8005\u5de5\u5177\u4e2d\uff0c\u5207\u540e\u53f0\uff0c\u53ef\u6a21\u62df\u8fdb\u5165\u573a\u666f\u3002")),a.createElement("h3",{id:"\u5c0f\u7a0b\u5e8f\u7684seo---\u9875\u9762\u6536\u5f55sitemap"},a.createElement(l.AnchorLink,{to:"#\u5c0f\u7a0b\u5e8f\u7684seo---\u9875\u9762\u6536\u5f55sitemap","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),'\u5c0f\u7a0b\u5e8f\u7684"SEO"---\u9875\u9762\u6536\u5f55sitemap'),a.createElement("p",null,"\u5728app.js\u7684\u540c\u7ea7\u76ee\u5f55\u4e0b\u6709sitemap.json\u6587\u4ef6\uff0c\u7528\u4e8e\u914d\u7f6e\u6536\u5f55\u89c4\u5219"),a.createElement("p",null,a.createElement(l.Link,{to:"https://developers.weixin.qq.com/miniprogram/dev/framework/sitemap.html"},"stiemap\u914d\u7f6e")),a.createElement("p",null,"\u4f5c\u7528\uff1a"),a.createElement("p",null,"\u4f7f\u5c0f\u7a0b\u5e8f\u641c\u7d22\u53ef\u6839\u636e\u5c0f\u7a0b\u5e8f\u7684\u5185\u5bb9\u8fdb\u884c\u641c\u7d22\u5230"),a.createElement("p",null,"\u4f7f\u7528\u65b9\u6cd5\uff1a"),a.createElement("p",null,"1\u3001\u5728\u5fae\u4fe1\u516c\u4f17\u5e73\u53f0\uff0c\u5c0f\u7a0b\u5e8f\u4fe1\u606f > \u9875\u9762\u6536\u5f55\u8bbe\u7f6e > \u6253\u5f00 (\u9ed8\u8ba4\u662f\u5df2\u5f00\u542f)"),a.createElement("p",null,"2\u3001\u6253\u5f00sitemap.json\u6587\u4ef6\uff0c\u914d\u7f6e\u6536\u5f55\u89c4\u5219"),a.createElement(c.Z,{code:'{\n  "desc": "\u5173\u4e8e\u672c\u6587\u4ef6\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u8003\u6587\u6863 https://developers.weixin.qq.com/miniprogram/dev/framework/sitemap.html",\n  "rules": [{ // \u6536\u5f55\u89c4\u5219\n  "action": "allow",// \u662f\u5426\u88ab\u6536\u5f55\uff0callow\u5141\u8bb8\u88ab\u6536\u5f55\uff0cdisallow\u4e0d\u5141\u8bb8\n  "page": "*" // *\u661f\u53f7\u8868\u793a\u6240\u6709\u9875\u9762\u90fd\u88ab\u6536\u5f55\n  }]\n}',lang:"json"}),a.createElement(c.Z,{code:'{\n  "desc": "\u5173\u4e8e\u672c\u6587\u4ef6\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u8003\u6587\u6863 https://developers.weixin.qq.com/miniprogram/dev/framework/sitemap.html",\n  "rules": [{ // \u6536\u5f55\u89c4\u5219\uff0c\u53ef\u6dfb\u52a0\u591a\u6761\n  "action": "allow", // \u662f\u5426\u88ab\u6536\u5f55\n  "page":"pages/player/player",  // \u9875\u9762\n  "params": ["musicId","index"], // \u94fe\u63a5\u7684\u52a8\u6001\u53c2\u6570\n   "matching":\'exact\' // \u8868\u793aparams\u7684\u53c2\u6570\u662f\u5426\u8981\u51c6\u786e\u7684\u5339\u914d\n  }\uff0c{\n  "action": "disallow", // \u662f\u5426\u88ab\u6536\u5f55\n  "page":"*",  /\n  }]\n}\n\n// \u4e0a\u9762\u914d\u7f6e\u89c4\u5219\u8868\u793a\u9664\u4e86player\u9875\u9762\u88ab\u6536\u5f55\u5916\uff0c\u5176\u4ed6\u9875\u9762\u4e0d\u88ab\u6536\u5f55',lang:"json"}),a.createElement("h3",{id:"\u5c0f\u7a0b\u5e8f\u4e0a\u7ebf\u5ba1\u6838\u6d41\u7a0b"},a.createElement(l.AnchorLink,{to:"#\u5c0f\u7a0b\u5e8f\u4e0a\u7ebf\u5ba1\u6838\u6d41\u7a0b","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u5c0f\u7a0b\u5e8f\u4e0a\u7ebf\u5ba1\u6838\u6d41\u7a0b"),a.createElement("p",null,"\u5fae\u4fe1\u516c\u4f17\u5e73\u53f0\uff0c\u7248\u672c\u7ba1\u7406>\u628a\u5c0f\u7a0b\u5e8f\u4e0a\u4f20\u4e3a\u4f53\u9a8c\u7248\u300b\u63d0\u4ea4\u5ba1\u6838\u300b\u4e0a\u7ebf"),a.createElement("h2",{id:"\u540e\u53f0\u7ba1\u7406\u7cfb\u7edf"},a.createElement(l.AnchorLink,{to:"#\u540e\u53f0\u7ba1\u7406\u7cfb\u7edf","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u540e\u53f0\u7ba1\u7406\u7cfb\u7edf"),a.createElement("h4",{id:"\u67b6\u6784\u793a\u610f\u56fe"},a.createElement(l.AnchorLink,{to:"#\u67b6\u6784\u793a\u610f\u56fe","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u67b6\u6784\u793a\u610f\u56fe"),a.createElement("p",null,"\u200b    \u524d\u7aef                                                           \u540e\u53f0                                                         \u5c0f\u7a0b\u5e8f\u4e91\u5f00\u53d1"),a.createElement("p",null,"vue-admin-template  <---\u901a\u8fc7ajax--\x3e \u57fa\u4e8eKoa2\uff1bHTTP API \u6216 tcb-admin-node    ----\x3e\u4e91\u51fd\u6570\u3001\u4e91\u6570\u636e\u5e93\u3001\u4e91\u5b58\u50a8"),a.createElement("p",null,"\u200b"),a.createElement("h4",{id:"vue-admin-template\u6784\u5efa\u7ba1\u7406\u7cfb\u7edf\u524d\u7aef"},a.createElement(l.AnchorLink,{to:"#vue-admin-template\u6784\u5efa\u7ba1\u7406\u7cfb\u7edf\u524d\u7aef","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"vue-admin-template\u6784\u5efa\u7ba1\u7406\u7cfb\u7edf\u524d\u7aef"),a.createElement("p",null,a.createElement(l.Link,{to:"https://github.com/PanJiaChen/vue-element-admin"},"vue-element-admin")," \u57fa\u4e8eelement\u7684\u540e\u53f0\u7ba1\u7406\u7cfb\u7edf\u6a21\u677f"),a.createElement("p",null,a.createElement(l.Link,{to:"https://github.com/PanJiaChen/vue-admin-template"},"vue-admin-template")," \u662f ",a.createElement(l.Link,{to:"https://github.com/PanJiaChen/vue-element-admin"},"vue-element-admin"),"\u7684\u7b80\u5316\u7248"),a.createElement("p",null,"\u4f7f\u7528\u65b9\u6cd5\u67e5\u770b\u5b98\u65b9\u6587\u6863\u3002"),a.createElement("h4",{id:"koa2\u6784\u5efa\u7ba1\u7406\u7cfb\u7edf\u540e\u7aef"},a.createElement(l.AnchorLink,{to:"#koa2\u6784\u5efa\u7ba1\u7406\u7cfb\u7edf\u540e\u7aef","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"Koa2\u6784\u5efa\u7ba1\u7406\u7cfb\u7edf\u540e\u7aef"),a.createElement("p",null,"\u5b98\u7f51\uff1a ",a.createElement(l.Link,{to:"https://koa.bootcss.com/"},"https://koa.bootcss.com/")),a.createElement("p",null,"\u65b0\u5efa\u7a7a\u6587\u4ef6\u5939wx-music-admin-backend\uff0c\u6253\u5f00\u7ec8\u7aef\uff1a"),a.createElement(c.Z,{code:"# \u751f\u6210package.json\u6587\u4ef6\uff0c-y \u8868\u793a\u9ed8\u8ba4\u7684\u914d\u7f6e\nnpm init -y\n\n# \u5b89\u88c5koa\nnpm install koa\n\n# \u65b0\u5efaapp.js\u6587\u4ef6 (win10\u7cfb\u7edf\u547d\u4ee4)\uff0c\u4f5c\u4e3a\u9879\u76ee\u5165\u53e3\u6587\u4ef6\ntype nul > app.js",lang:"sh"}),a.createElement("p",null,"app.js:"),a.createElement(c.Z,{code:"const Koa = require('koa')\nconst chalk = require('chalk') // \u4f7fconsole.log\u6253\u5370\u6587\u5b57\u6709\u989c\u8272\u7684\u63d2\u4ef6\uff0c\u9700: npm i chalk\nconst app = new Koa()\n\napp.use(async (ctx) => {\n  ctx.body = 'Hello Wolrd'\n})\nconst port = 3000\napp.listen(port, () => { // \u7aef\u53e3\u53f7\uff0c\u5f00\u542f\u670d\u52a1\u540e\u7684\u56de\u8c03\u51fd\u6570\n  console.log(chalk.green(`> \u670d\u52a1\u5df2\u5f00\u542f\uff0c\u8bbf\u95ee\uff1ahttp://localhost:${port}`))\n})",lang:"js"}),a.createElement("p",null,"\u7ec8\u7aef\uff1a"),a.createElement(c.Z,{code:"# node\u542f\u52a8\u9879\u76ee\nnode app.js\n\n# \u8bbf\u95ee\uff1ahttp://localhost:3000",lang:"sh"}),a.createElement("h4",{id:"\u63a5\u53e3\u8c03\u7528\u51ed\u8bc1-access_token-\u7684\u7f13\u5b58\u4e0e\u66f4\u65b0"},a.createElement(l.AnchorLink,{to:"#\u63a5\u53e3\u8c03\u7528\u51ed\u8bc1-access_token-\u7684\u7f13\u5b58\u4e0e\u66f4\u65b0","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u63a5\u53e3\u8c03\u7528\u51ed\u8bc1 access_token \u7684\u7f13\u5b58\u4e0e\u66f4\u65b0"),a.createElement("p",null,"access_token\uff0c\u5fae\u4fe1\u7684\u63a5\u53e3\u8c03\u7528\u51ed\u8bc1\uff0c\u8be6\u60c5\uff1a",a.createElement(l.Link,{to:"https://developers.weixin.qq.com/miniprogram/dev/api-backend/open-api/access-token/auth.getAccessToken.html"},"https://developers.weixin.qq.com/miniprogram/dev/api-backend/open-api/access-token/auth.getAccessToken.html")),a.createElement("p",null,"\u56de\u5230\u9879\u76eewx-music-admin-backend\uff0c\u6253\u5f00\u7ec8\u7aef\uff1a"),a.createElement(c.Z,{code:"# HTTP \u8bf7\u6c42 \u63d2\u4ef6\nnpm i request\nnpm i request-promise",lang:"sh"}),a.createElement(c.Z,{code:"/**\n * \u83b7\u53d6\u5fae\u4fe1\u63a5\u53e3\u8c03\u7528\u51ed\u8bc1\n * \u8be6\u60c5\uff1ahttps://developers.weixin.qq.com/miniprogram/dev/api-backend/open-api/access-token/auth.getAccessToken.html\n */\n\n\nconst rp = require('request-promise') // node\u53d1\u9001http\u8bf7\u6c42\u7684\u63d2\u4ef6\nconst fs = require('fs') // node\u6587\u4ef6\u6a21\u5757\nconst path = require('path') // node \u8def\u5f84\u6a21\u5757\n\n//fileName = __dirname \u5f53\u524d\u6587\u4ef6\u6240\u5728\u76ee\u5f55\u7684\u7edd\u5bf9\u8def\u5f84, \u52a0\u4e0a './access_token.json'\nconst fileName = path.resolve(__dirname, './access_token.json')\n\n// \u8fd9\u4e24\u4e2a\u53c2\u6570\u7684\u83b7\u53d6\uff1a\u5fae\u4fe1\u516c\u4f17\u5e73\u53f0>\u5f00\u53d1>\u5f00\u53d1\u8bbe\u7f6e\nconst APPID = 'wxc4e0b2d98063b103'\nconst APPSECRET = 'xxx' //\u5c0f\u7a0b\u5e8f\u5bc6\u94a5\uff0c\u6ce8\u610f\u4fdd\u5bc6!\n\n// \u5fae\u4fe1 access_token \u8bf7\u6c42\u5730\u5740\nconst URL = `https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&appid=${APPID}&secret=${APPSECRET}`\n\n// \u53d1\u9001\u8bf7\u6c42\u83b7\u53d6AccessToken\nconst updateAccessToken = async () => {\n  const resStr = await rp(URL)\n  const res = JSON.parse(resStr)\n\n  if (res.access_token) {\n    // node\u5199\u6587\u4ef6,\u53c2\u6570\uff1a1 \u6587\u4ef6\u8def\u5f84\uff0c2 \u6587\u4ef6\u5185\u5bb9, \u9996\u6b21\u5199\u6587\u4ef6\u4e3a\u65b0\u5efa\uff0c\u5f80\u540e\u4e3a\u8986\u76d6\n    fs.writeFileSync(fileName, JSON.stringify({\n      access_token: res.access_token,\n      createTime: new Date()\n    }))\n  } else { // \u5982\u83b7\u53d6\u4e0d\u5230\uff0c\u518d\u6b21\u83b7\u53d6\n    await updateAccessToken()\n  }\n}\n\n// \u8bfb\u53d6access_token\nconst getAccessToken = async () => {\n  try {\n     // node\u8bfb\u53d6\u6587\u4ef6,\u53c2\u6570\uff1a1 \u8bfb\u53d6\u7684\u6587\u4ef6\uff0c2 \u5b57\u7b26\u96c6\n    const readRes = fs.readFileSync(fileName, 'utf8')\n    const readObj = JSON.parse(readRes)\n\n    // \u5982\u679c\u670d\u52a1\u5668\u5b95\u673a\u5bfc\u81f4setInterval\u65e0\u6cd5\u5b9a\u65f6\u66f4\u65b0\uff0c\u8fd9\u91cc\u9700\u8981\u518d\u6b21\u5224\u65adaccess_token\u7684\u6709\u6548\u6027\n    const createTime = new Date(readObj.createTime).getTime()\n    const nowTime = new Date().getTime()\n    if((nowTime - createTime) / 1000 / 60 / 60 >= 2) {\n      await updateAccessToken()\n      await getAccessToken()\n      return\n    }\n    return readObj.access_token\n\n  } catch (error) { //\u6355\u83b7\u5f02\u5e38\uff0c\u5728\u672a\u521b\u5efa\u6587\u4ef6\u65f6\uff0c\u5148\u521b\u5efa\u6587\u4ef6\n    await updateAccessToken()\n    await getAccessToken()\n  }\n}\n\n// access_token\u6709\u6548\u671f\u4e3a2\u4e2a\u5c0f\u65f6\uff0c\u5b9a\u65f6\u66f4\u65b0\nsetInterval(async () => {\n  await updateAccessToken()\n}, (7200 - 300) * 1000)\n\nmodule.exports = getAccessToken",lang:"js"}),a.createElement("h4",{id:"\u540e\u7aef\u4ee3\u7801\u901a\u8fc7http-api-\u89e6\u53d1\u4e91\u51fd\u6570\u83b7\u53d6\u6570\u636e"},a.createElement(l.AnchorLink,{to:"#\u540e\u7aef\u4ee3\u7801\u901a\u8fc7http-api-\u89e6\u53d1\u4e91\u51fd\u6570\u83b7\u53d6\u6570\u636e","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u540e\u7aef\u4ee3\u7801\u901a\u8fc7HTTP API \u89e6\u53d1\u4e91\u51fd\u6570\u83b7\u53d6\u6570\u636e"),a.createElement("p",null,a.createElement(l.Link,{to:"https://developers.weixin.qq.com/miniprogram/dev/wxcloud/reference-http-api/functions/invokeCloudFunction.html"},"HTTP API \u89e6\u53d1\u4e91\u51fd\u6570")),a.createElement("h4",{id:"\u4ea7\u751f\u8de8\u57df\u548c\u540e\u7aef\u89e3\u51b3\u8de8\u57df\u95ee\u9898"},a.createElement(l.AnchorLink,{to:"#\u4ea7\u751f\u8de8\u57df\u548c\u540e\u7aef\u89e3\u51b3\u8de8\u57df\u95ee\u9898","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u4ea7\u751f\u8de8\u57df\u548c\u540e\u7aef\u89e3\u51b3\u8de8\u57df\u95ee\u9898"),a.createElement("p",null,"\u7ba1\u7406\u7cfb\u7edf\u524d\u7aef\u5411\u7ba1\u7406\u7cfb\u7edf\u540e\u7aef\u8bf7\u6c42\u6570\u636e\uff0c\u4ea7\u751f\u4e86\u8de8\u57df\u95ee\u9898"),a.createElement(c.Z,{code:"// \u4ea7\u751f\u8de8\u57df\u7684\u51e0\u79cd\u60c5\u51b5\n  // http://www.a.com  https://www.a.com \u534f\u8bae\u4e0d\u540c\n  // http://www.a.com  http://www.b.com \u57df\u540d\u4e0d\u540c\n  // http://www.a.com  http://news.a.com \u4e3b\u57df\u4e0e\u5b50\u57df\u4e0d\u540c\n  // http://www.a.com:8080  http://www.a.com:3000 \u7aef\u53e3\u4e0d\u540c\n\n// \u89e3\u51b3\u8de8\u57df\u7684\u51e0\u79cd\u65b9\u6cd5\n// jsonp\n// iframe\n// postMessage\u8de8\u57df\n// \u8de8\u57df\u8d44\u6e90\u5171\u4eab\uff08CORS\uff09",lang:"js"}),a.createElement("p",null,"\u7ba1\u7406\u7cfb\u7edf\u540e\u7aef\uff0c\u5b89\u88c5"),a.createElement(c.Z,{code:"// \u89e3\u51b3\u8de8\u57df\u95ee\u9898\u7684koa\u5305\nnpm i koa2-cors",lang:"sh"}),a.createElement("p",null,"app.js"),a.createElement(c.Z,{code:"//\u5904\u7406\u8de8\u57df\napp.use(cors({\n  origin: ['http://localhost:9528'], // \u5141\u8bb8\u8bbf\u95ee\u672c\u670d\u52a1\u7684\u57df\n  credentials: true\n}))",lang:"js"}),a.createElement("h4",{id:"\u4e91\u6570\u636e\u5e93\u7684\u589e\u5220\u6539\u67e5\u63a5\u53e3"},a.createElement(l.AnchorLink,{to:"#\u4e91\u6570\u636e\u5e93\u7684\u589e\u5220\u6539\u67e5\u63a5\u53e3","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u4e91\u6570\u636e\u5e93\u7684\u589e\u5220\u6539\u67e5\u63a5\u53e3"),a.createElement("p",null,a.createElement(l.Link,{to:"https://developers.weixin.qq.com/miniprogram/dev/wxcloud/reference-http-api/database/databaseQuery.html"},"\u6570\u636e\u5e93\u67e5\u8be2\u8bb0\u5f55")),a.createElement("h4",{id:"\u540e\u7aef\u83b7\u53d6\u524d\u7aefpost\u8bf7\u6c42\u4f20\u6765\u7684\u6570\u636e"},a.createElement(l.AnchorLink,{to:"#\u540e\u7aef\u83b7\u53d6\u524d\u7aefpost\u8bf7\u6c42\u4f20\u6765\u7684\u6570\u636e","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u540e\u7aef\u83b7\u53d6\u524d\u7aefpost\u8bf7\u6c42\u4f20\u6765\u7684\u6570\u636e"),a.createElement("p",null,"get\u8bf7\u6c42\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7ctx.request.query\u83b7\u53d6\uff0c\u4f46\u662fpost\u8bf7\u6c42\u9700\u8981\u5b89\u88c5koa-body"),a.createElement(c.Z,{code:"npm i koa-body",lang:"sh"}),a.createElement("p",null,"app.js"),a.createElement(c.Z,{code:"const koaBody = require('koa-body') // \u5bf9post\u8bf7\u6c42\u524d\u7aef\u4f20\u6765\u7684\u6570\u636e\u7684\u83b7\u53d6\uff0c\u9700\u8981\u6b64\u4f9d\u8d56\n\n// \u63a5\u6536post\u53c2\u6570\u89e3\u6790\napp.use(koaBody({\n  multipart: true\n}))",lang:"js"}),a.createElement("p",null,"\u63a5\u53e3.js"),a.createElement(c.Z,{code:"router.post('/updatePlaylist', async (ctx, next) => {\n\n  const params = ctx.request.body // post\u8bf7\u6c42\u83b7\u53d6\u524d\u7aef\u4f20\u6765\u7684\u6570\u636e\uff0c\u9700\u5b89\u88c5\u548c\u914d\u7f6ekoa-body\n\n})",lang:"js"}),a.createElement("h4",{id:"\u540e\u7aef\u83b7\u53d6\u4e91\u5b58\u50a8\u56fe\u7247"},a.createElement(l.AnchorLink,{to:"#\u540e\u7aef\u83b7\u53d6\u4e91\u5b58\u50a8\u56fe\u7247","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u540e\u7aef\u83b7\u53d6\u4e91\u5b58\u50a8\u56fe\u7247"),a.createElement("p",null,"\u4e91\u5b58\u50a8\u4e2d\u4e0a\u4f20\u56fe\u7247\uff0c\u4e91\u6570\u636e\u5e93\u4e2d\u65b0\u5efa\u56fe\u7247\u7684\u96c6\u5408\uff0c\u5e76\u6dfb\u52a0\u6570\u636e\u5b57\u6bb5\uff0c\u5b57\u6bb5\u5305\u542b\u4e91\u6587\u4ef6\u7684fileid\u3002"),a.createElement("p",null,"\u540e\u7aef\u9879\u76ee\u901a\u8fc7\u8c03\u7528\u4e91\u6570\u636e\u5e93\u7684\u65b9\u5f0f\u83b7\u53d6\u6570\u636e"),a.createElement(c.Z,{code:"router.get('/list', async (ctx, next) => {\n  // \u63a5\u53e3\u4e2d\u8bfb\u53d6\u6570\u636e\u5e93\u9ed8\u8ba4\u6700\u591a10\u6761\u6570\u636e\n  const query = `db.collection('swiper').get()`\n  const res = await callCloudDB(ctx, 'databasequery', query)\n  console.log(res)\n\n})",lang:"js"}),a.createElement("p",null,"\u4f46\u83b7\u53d6\u5230\u7684\u6570\u636e\u4e3afileid\uff0c\u5e76\u4e0d\u80fd\u7528\u4e8e\u663e\u793a\u56fe\u7247\uff0c\u9700\u8981\u901a\u8fc7\u5fae\u4fe1HTTP API\u83b7\u53d6\u4e91\u5b58\u50a8\u7684\u63a5\u53e3\u6765\u83b7\u53d6\u56fe\u7247\u5730\u5740"),a.createElement("p",null,a.createElement(l.Link,{to:"https://developers.weixin.qq.com/miniprogram/dev/wxcloud/reference-http-api/storage/batchDownloadFile.html"},"\u83b7\u53d6\u4e91\u5b58\u50a8")),a.createElement("h4",{id:"\u540e\u7aef\u4e0a\u4f20\u56fe\u7247\u5230\u4e91\u5b58\u50a8"},a.createElement(l.AnchorLink,{to:"#\u540e\u7aef\u4e0a\u4f20\u56fe\u7247\u5230\u4e91\u5b58\u50a8","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u540e\u7aef\u4e0a\u4f20\u56fe\u7247\u5230\u4e91\u5b58\u50a8"),a.createElement("p",null,a.createElement(l.Link,{to:"https://developers.weixin.qq.com/miniprogram/dev/wxcloud/reference-http-api/storage/uploadFile.html"},"\u6587\u4ef6\u4e0a\u4f20"))))}));n["default"]=e=>{var n=a.useContext(l.context),t=n.demos;return a.useEffect((()=>{var n;null!==e&&void 0!==e&&null!==(n=e.location)&&void 0!==n&&n.hash&&l.AnchorLink.scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),a.createElement(r,{demos:t})}}}]);